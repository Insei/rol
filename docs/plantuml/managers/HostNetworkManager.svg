<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1316px" preserveAspectRatio="none" style="width:2696px;height:1316px;background:#FFFFFF;" version="1.1" viewBox="0 0 2696 1316" width="2696px" zoomAndPan="magnify"><defs/><g><!--MD5=[d5ac3844f66b12d9e08170e47495e096]
cluster app--><g id="cluster_app"><path d="M646.5,626 L676.5,626 A3.75,3.75 0 0 1 679,628.5 L686,648.2969 L2686.5,648.2969 A2.5,2.5 0 0 1 2689,650.7969 L2689,1306.5 A2.5,2.5 0 0 1 2686.5,1309 L646.5,1309 A2.5,2.5 0 0 1 644,1306.5 L644,628.5 A2.5,2.5 0 0 1 646.5,626 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="644" x2="686" y1="648.2969" y2="648.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="29" x="648" y="640.9951">app</text></g><!--MD5=[27f772719433d509ddbc20ff768eba08]
cluster domain--><g id="cluster_domain"><path d="M8.5,6 L66.5,6 A3.75,3.75 0 0 1 69,8.5 L76,28.2969 L1510.5,28.2969 A2.5,2.5 0 0 1 1513,30.7969 L1513,599.5 A2.5,2.5 0 0 1 1510.5,602 L8.5,602 A2.5,2.5 0 0 1 6,599.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="76" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="57" x="10" y="20.9951">domain</text></g><!--MD5=[77349be1bd27b81b697a0f9b3aded3c8]
cluster infrastructure--><g id="cluster_infrastructure"><path d="M1704.5,442.5 L1815.5,442.5 A3.75,3.75 0 0 1 1818,445 L1825,464.7969 L2426.5,464.7969 A2.5,2.5 0 0 1 2429,467.2969 L2429,579 A2.5,2.5 0 0 1 2426.5,581.5 L1704.5,581.5 A2.5,2.5 0 0 1 1702,579 L1702,445 A2.5,2.5 0 0 1 1704.5,442.5 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1702" x2="1825" y1="464.7969" y2="464.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1706" y="457.4951">infrastructure</text></g><!--MD5=[7d972e8a870a7d3102e7596738050350]
class IHostNetworkLink--><g id="elem_IHostNetworkLink"><rect codeLine="3" fill="#F1F1F1" height="104.8906" id="IHostNetworkLink" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="212" x="908" y="924.5"/><ellipse cx="949.1" cy="940.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M945.0219,936.2656 L945.0219,934.1094 L952.4125,934.1094 L952.4125,936.2656 L949.9438,936.2656 L949.9438,944.3438 L952.4125,944.3438 L952.4125,946.5 L945.0219,946.5 L945.0219,944.3438 L947.4906,944.3438 L947.4906,936.2656 L945.0219,936.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="122" x="968.9" y="945.3467">IHostNetworkLink</text><line style="stroke:#181818;stroke-width:0.5;" x1="909" x2="1119" y1="956.5" y2="956.5"/><ellipse cx="919" cy="970.1484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="928" y="973.4951">GetName() string</text><line style="stroke:#181818;stroke-width:1.0;" x1="909" x2="1119" y1="980.7969" y2="980.7969"/><ellipse cx="919" cy="994.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="928" y="997.792">GetType() string</text><line style="stroke:#181818;stroke-width:1.0;" x1="909" x2="1119" y1="1005.0938" y2="1005.0938"/><ellipse cx="919" cy="1018.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="928" y="1022.0889">GetAddresses() []net.IPNet</text></g><path d="M659.5,924.5 L659.5,949.6328 A0,0 0 0 0 659.5,949.6328 L843.5,949.6328 A0,0 0 0 0 843.5,949.6328 L843.5,942.5 L912,968.6484 L843.5,934.5 L843.5,934.5 L833.5,924.5 L659.5,924.5 A0,0 0 0 0 659.5,924.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M833.5,924.5 L833.5,934.5 L843.5,934.5 L833.5,924.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="665.5" y="941.5669">Gets host interface name</text><path d="M659.5,959.6328 L659.5,984.7656 A0,0 0 0 0 659.5,984.7656 L834.5,984.7656 A0,0 0 0 0 834.5,984.7656 L834.5,977.6328 L912,992.9453 L834.5,969.6328 L834.5,969.6328 L824.5,959.6328 L659.5,959.6328 A0,0 0 0 0 659.5,959.6328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M824.5,959.6328 L824.5,969.6328 L834.5,969.6328 L824.5,959.6328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="665.5" y="976.6997">Gets host interface type</text><path d="M659.5,994.7656 L659.5,1019.8984 A0,0 0 0 0 659.5,1019.8984 L872.5,1019.8984 A0,0 0 0 0 872.5,1019.8984 L872.5,1012.7656 L912,1017.2422 L872.5,1004.7656 L872.5,1004.7656 L862.5,994.7656 L659.5,994.7656 A0,0 0 0 0 659.5,994.7656 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M862.5,994.7656 L862.5,1004.7656 L872.5,1004.7656 L862.5,994.7656 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="665.5" y="1011.8325">Gets host interface addresses</text><!--MD5=[eee03abc33d997fda74f03d63bc5bd12]
class IHostNetworkManager--><g id="elem_IHostNetworkManager"><rect codeLine="5" fill="#F1F1F1" height="469.3438" id="IHostNetworkManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="646" x="2027" y="742.5"/><ellipse cx="2268.75" cy="758.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2264.6719,754.2656 L2264.6719,752.1094 L2272.0625,752.1094 L2272.0625,754.2656 L2269.5938,754.2656 L2269.5938,762.3438 L2272.0625,762.3438 L2272.0625,764.5 L2264.6719,764.5 L2264.6719,762.3438 L2267.1406,762.3438 L2267.1406,754.2656 L2264.6719,754.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="154" x="2289.25" y="763.3467">IHostNetworkManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="2028" x2="2672" y1="774.5" y2="774.5"/><ellipse cx="2038" cy="788.1484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="2047" y="791.4951">GetList() ([]IHostNetworkLink, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="798.7969" y2="798.7969"/><ellipse cx="2038" cy="812.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="348" x="2047" y="815.792">GetByName(name string) (IHostNetworkLink, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="823.0938" y2="823.0938"/><ellipse cx="2038" cy="836.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="340" x="2047" y="840.0889">CreateVlan(master string, vlanID int) (string, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="847.3906" y2="847.3906"/><ellipse cx="2038" cy="861.0391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="277" x="2047" y="864.3857">CreateBridge(name string) (string, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="871.6875" y2="871.6875"/><ellipse cx="2038" cy="885.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="358" x="2047" y="888.6826">SetLinkMaster(slaveName, masterName string) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="895.9844" y2="895.9844"/><ellipse cx="2038" cy="909.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="268" x="2047" y="912.9795">UnsetLinkMaster(linkName string) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="920.2813" y2="920.2813"/><ellipse cx="2038" cy="933.9297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="222" x="2047" y="937.2764">SetLinkUp(linkName string) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="944.5781" y2="944.5781"/><ellipse cx="2038" cy="958.2266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="259" x="2047" y="961.5732">DeleteLinkByName(name string) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="968.875" y2="968.875"/><ellipse cx="2038" cy="982.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="318" x="2047" y="985.8701">AddrAdd(linkName string, addr net.IPNet) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="993.1719" y2="993.1719"/><ellipse cx="2038" cy="1006.8203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="337" x="2047" y="1010.167">AddrDelete(linkName string, addr net.IPNet) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1017.4688" y2="1017.4688"/><ellipse cx="2038" cy="1031.1172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="620" x="2047" y="1034.4639">CreateTrafficRule(table string, rule HostNetworkTrafficRule) (HostNetworkTrafficRule, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1041.7656" y2="1041.7656"/><ellipse cx="2038" cy="1055.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="441" x="2047" y="1058.7607">DeleteTrafficRule(table string, rule HostNetworkTrafficRule) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1066.0625" y2="1066.0625"/><ellipse cx="2038" cy="1079.7109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="504" x="2047" y="1083.0576">GetChainRules(table string, chain string) ([]HostNetworkTrafficRule, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1090.3594" y2="1090.3594"/><ellipse cx="2038" cy="1104.0078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="415" x="2047" y="1107.3545">GetTableRules(table string) ([]HostNetworkTrafficRule, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1114.6563" y2="1114.6563"/><ellipse cx="2038" cy="1128.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="2047" y="1131.6514">SaveConfiguration() error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1138.9531" y2="1138.9531"/><ellipse cx="2038" cy="1152.6016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="2047" y="1155.9482">RestoreFromBackup() error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1163.25" y2="1163.25"/><ellipse cx="2038" cy="1176.8984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="2047" y="1180.2451">ResetChanges() error</text><line style="stroke:#181818;stroke-width:1.0;" x1="2028" x2="2672" y1="1187.5469" y2="1187.5469"/><ellipse cx="2038" cy="1201.1953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="2047" y="1204.542">HasUnsavedChanges() bool</text></g><path d="M1590.5,661 L1590.5,686.1328 A0,0 0 0 0 1590.5,686.1328 L1832.5,686.1328 A0,0 0 0 0 1832.5,686.1328 L1832.5,679 L2031,786.6484 L1832.5,671 L1832.5,671 L1822.5,661 L1590.5,661 A0,0 0 0 0 1590.5,661 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1822.5,661 L1822.5,671 L1832.5,671 L1822.5,661 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="1596.5" y="678.0669">Gets list of host network interfaces</text><path d="M1590.5,696.1328 L1590.5,721.2656 A0,0 0 0 0 1590.5,721.2656 L1866.5,721.2656 A0,0 0 0 0 1866.5,721.2656 L1866.5,714.1328 L2031,810.9453 L1866.5,706.1328 L1866.5,706.1328 L1856.5,696.1328 L1590.5,696.1328 A0,0 0 0 0 1590.5,696.1328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1856.5,696.1328 L1856.5,706.1328 L1866.5,706.1328 L1856.5,696.1328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="1596.5" y="713.1997">Gets host network interface by its name</text><path d="M1590.5,731.2656 L1590.5,756.3984 A0,0 0 0 0 1590.5,756.3984 L1991.5,756.3984 A0,0 0 0 0 1991.5,756.3984 L1991.5,749.2656 L2031,835.2422 L1991.5,741.2656 L1991.5,741.2656 L1981.5,731.2656 L1590.5,731.2656 A0,0 0 0 0 1590.5,731.2656 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1981.5,731.2656 L1981.5,741.2656 L1991.5,741.2656 L1981.5,731.2656 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380" x="1596.5" y="748.3325">Create host vlan interface with name rol.{Master}.{VlanID}</text><path d="M1590.5,766.3984 L1590.5,791.5313 A0,0 0 0 0 1590.5,791.5313 L1956.5,791.5313 A0,0 0 0 0 1956.5,791.5313 L1956.5,784.3984 L2031,859.5391 L1956.5,776.3984 L1956.5,776.3984 L1946.5,766.3984 L1590.5,766.3984 A0,0 0 0 0 1590.5,766.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1946.5,766.3984 L1946.5,776.3984 L1956.5,776.3984 L1946.5,766.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="345" x="1596.5" y="783.4653">Create host bridge interface with name rol.br.{Name}</text><path d="M1590.5,801.5313 L1590.5,826.6641 A0,0 0 0 0 1590.5,826.6641 L1729.5,826.6641 A0,0 0 0 0 1729.5,826.6641 L1729.5,819.5313 L2031,883.8359 L1729.5,811.5313 L1729.5,811.5313 L1719.5,801.5313 L1590.5,801.5313 A0,0 0 0 0 1590.5,801.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1719.5,801.5313 L1719.5,811.5313 L1729.5,811.5313 L1719.5,801.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="1596.5" y="818.5981">Set master for link</text><path d="M1590.5,836.6641 L1590.5,861.7969 A0,0 0 0 0 1590.5,861.7969 L1811.5,861.7969 A0,0 0 0 0 1811.5,861.7969 L1811.5,854.6641 L2031,908.1328 L1811.5,846.6641 L1811.5,846.6641 L1801.5,836.6641 L1590.5,836.6641 A0,0 0 0 0 1590.5,836.6641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1801.5,836.6641 L1801.5,846.6641 L1811.5,846.6641 L1801.5,836.6641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="1596.5" y="853.731">Removes the master of the link</text><path d="M1590.5,871.7969 L1590.5,896.9297 A0,0 0 0 0 1590.5,896.9297 L1763.5,896.9297 A0,0 0 0 0 1763.5,896.9297 L1763.5,889.7969 L2031,932.4297 L1763.5,881.7969 L1763.5,881.7969 L1753.5,871.7969 L1590.5,871.7969 A0,0 0 0 0 1590.5,871.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1753.5,871.7969 L1753.5,881.7969 L1763.5,881.7969 L1753.5,871.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1596.5" y="888.8638">Enables the link on host</text><path d="M1590.5,906.9297 L1590.5,932.0625 A0,0 0 0 0 1590.5,932.0625 L1851.5,932.0625 A0,0 0 0 0 1851.5,932.0625 L1851.5,924.9297 L2031,956.7266 L1851.5,916.9297 L1851.5,916.9297 L1841.5,906.9297 L1590.5,906.9297 A0,0 0 0 0 1590.5,906.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1841.5,906.9297 L1841.5,916.9297 L1851.5,916.9297 L1841.5,906.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="1596.5" y="923.9966">Deletes interface on host by its name</text><path d="M1590.5,942.0625 L1590.5,967.1953 A0,0 0 0 0 1590.5,967.1953 L1870.5,967.1953 A0,0 0 0 0 1870.5,967.1953 L1870.5,960.0625 L2031,981.0234 L1870.5,952.0625 L1870.5,952.0625 L1860.5,942.0625 L1590.5,942.0625 A0,0 0 0 0 1590.5,942.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1860.5,942.0625 L1860.5,952.0625 L1870.5,952.0625 L1860.5,942.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="1596.5" y="959.1294">Add new ip address for network interface</text><path d="M1590.5,977.1953 L1590.5,1002.3281 A0,0 0 0 0 1590.5,1002.3281 L1858.5,1002.3281 A0,0 0 0 0 1858.5,1002.3281 L1858.5,995.1953 L2031,1005.3203 L1858.5,987.1953 L1858.5,987.1953 L1848.5,977.1953 L1590.5,977.1953 A0,0 0 0 0 1590.5,977.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1848.5,977.1953 L1848.5,987.1953 L1858.5,987.1953 L1848.5,977.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="1596.5" y="994.2622">Delete ip address for network interface</text><path d="M1590.5,1012.3281 L1590.5,1037.4609 A0,0 0 0 0 1590.5,1037.4609 L1892.5,1037.4609 A0,0 0 0 0 1892.5,1037.4609 L1892.5,1030.3281 L2031,1029.6172 L1892.5,1022.3281 L1892.5,1022.3281 L1882.5,1012.3281 L1590.5,1012.3281 A0,0 0 0 0 1590.5,1012.3281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1882.5,1012.3281 L1882.5,1022.3281 L1892.5,1022.3281 L1882.5,1012.3281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="1596.5" y="1029.395">Create netfilter traffic rule for specified table</text><path d="M1590.5,1047.4609 L1590.5,1072.5938 A0,0 0 0 0 1590.5,1072.5938 L1885.5,1072.5938 A0,0 0 0 0 1885.5,1072.5938 L1885.5,1065.4609 L2031,1053.9141 L1885.5,1057.4609 L1885.5,1057.4609 L1875.5,1047.4609 L1590.5,1047.4609 A0,0 0 0 0 1590.5,1047.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1875.5,1047.4609 L1875.5,1057.4609 L1885.5,1057.4609 L1875.5,1047.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274" x="1596.5" y="1064.5278">Delete netfilter traffic rule in specified table</text><path d="M1590.5,1082.5938 L1590.5,1107.7266 A0,0 0 0 0 1590.5,1107.7266 L1931.5,1107.7266 A0,0 0 0 0 1931.5,1107.7266 L1931.5,1100.5938 L2031,1078.2109 L1931.5,1092.5938 L1931.5,1092.5938 L1921.5,1082.5938 L1590.5,1082.5938 A0,0 0 0 0 1590.5,1082.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1921.5,1082.5938 L1921.5,1092.5938 L1931.5,1092.5938 L1921.5,1082.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="1596.5" y="1099.6606">Get selected netfilter chain rules at specified table</text><path d="M1590.5,1117.7266 L1590.5,1142.8594 A0,0 0 0 0 1590.5,1142.8594 L1818.5,1142.8594 A0,0 0 0 0 1818.5,1142.8594 L1818.5,1135.7266 L2031,1102.5078 L1818.5,1127.7266 L1818.5,1127.7266 L1808.5,1117.7266 L1590.5,1117.7266 A0,0 0 0 0 1590.5,1117.7266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1808.5,1117.7266 L1808.5,1127.7266 L1818.5,1127.7266 L1808.5,1117.7266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="1596.5" y="1134.7935">Get specified netfilter table rules</text><path d="M1590.5,1152.8594 L1590.5,1177.9922 A0,0 0 0 0 1590.5,1177.9922 L1961.5,1177.9922 A0,0 0 0 0 1961.5,1177.9922 L1961.5,1170.8594 L2031,1126.8047 L1961.5,1162.8594 L1961.5,1162.8594 L1951.5,1152.8594 L1590.5,1152.8594 A0,0 0 0 0 1590.5,1152.8594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1951.5,1152.8594 L1951.5,1162.8594 L1961.5,1162.8594 L1951.5,1152.8594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="1596.5" y="1169.9263">Save current host network configuration to the storage</text><path d="M1590.5,1187.9922 L1590.5,1213.125 A0,0 0 0 0 1590.5,1213.125 L1983.5,1213.125 A0,0 0 0 0 1983.5,1213.125 L1983.5,1205.9922 L2031,1151.1016 L1983.5,1197.9922 L1983.5,1197.9922 L1973.5,1187.9922 L1590.5,1187.9922 A0,0 0 0 0 1590.5,1187.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1973.5,1187.9922 L1973.5,1197.9922 L1983.5,1197.9922 L1973.5,1187.9922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="372" x="1596.5" y="1205.0591">Restore and apply host network configuration from backup</text><path d="M1590.5,1223.125 L1590.5,1248.2578 A0,0 0 0 0 1590.5,1248.2578 L1990.5,1248.2578 A0,0 0 0 0 1990.5,1248.2578 L1990.5,1241.125 L2031,1175.3984 L1990.5,1233.125 L1990.5,1233.125 L1980.5,1223.125 L1590.5,1223.125 A0,0 0 0 0 1590.5,1223.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1980.5,1223.125 L1980.5,1233.125 L1990.5,1233.125 L1980.5,1223.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="379" x="1596.5" y="1240.1919">Reset all applied changes to state from saved configuration</text><path d="M1590.5,1258.2578 L1590.5,1283.3906 A0,0 0 0 0 1590.5,1283.3906 L1837.5,1283.3906 A0,0 0 0 0 1837.5,1283.3906 L1837.5,1276.2578 L2031,1199.6953 L1837.5,1268.2578 L1837.5,1268.2578 L1827.5,1258.2578 L1590.5,1258.2578 A0,0 0 0 0 1590.5,1258.2578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1827.5,1258.2578 L1827.5,1268.2578 L1837.5,1268.2578 L1827.5,1258.2578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="1596.5" y="1275.3247">Gets a flag about unsaved changes</text><!--MD5=[de944ecaefb171a2f705a3207091d9ac]
class IHostNetworkConfigStorage--><g id="elem_IHostNetworkConfigStorage"><rect codeLine="5" fill="#F1F1F1" height="104.8906" id="IHostNetworkConfigStorage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="400" x="1155" y="924.5"/><ellipse cx="1254.75" cy="940.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1250.6719,936.2656 L1250.6719,934.1094 L1258.0625,934.1094 L1258.0625,936.2656 L1255.5938,936.2656 L1255.5938,944.3438 L1258.0625,944.3438 L1258.0625,946.5 L1250.6719,946.5 L1250.6719,944.3438 L1253.1406,944.3438 L1253.1406,936.2656 L1250.6719,936.2656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="192" x="1275.25" y="945.3467">IHostNetworkConfigStorage</text><line style="stroke:#181818;stroke-width:0.5;" x1="1156" x2="1554" y1="956.5" y2="956.5"/><ellipse cx="1166" cy="970.1484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="358" x="1175" y="973.4951">SaveConfig(config domain.HostNetworkConfig) error</text><line style="stroke:#181818;stroke-width:1.0;" x1="1156" x2="1554" y1="980.7969" y2="980.7969"/><ellipse cx="1166" cy="994.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="322" x="1175" y="997.792">GetConfig() (domain.HostNetworkConfig, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1156" x2="1554" y1="1005.0938" y2="1005.0938"/><ellipse cx="1166" cy="1018.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="374" x="1175" y="1022.0889">GetBackupConfig() (domain.HostNetworkConfig, error)</text></g><!--MD5=[e5fff6262f684687265fbe09f1b48075]
class HostNetworkLink--><g id="elem_HostNetworkLink"><rect codeLine="5" fill="#F1F1F1" height="104.8906" id="HostNetworkLink" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177" x="925.5" y="469"/><ellipse cx="953.55" cy="485" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M956.5188,490.6406 Q955.9406,490.9375 955.3,491.0781 Q954.6594,491.2344 953.9563,491.2344 Q951.4563,491.2344 950.1281,489.5938 Q948.8156,487.9375 948.8156,484.8125 Q948.8156,481.6875 950.1281,480.0313 Q951.4563,478.375 953.9563,478.375 Q954.6594,478.375 955.3,478.5313 Q955.9563,478.6875 956.5188,478.9844 L956.5188,481.7031 Q955.8938,481.125 955.3,480.8594 Q954.7063,480.5781 954.0813,480.5781 Q952.7375,480.5781 952.05,481.6563 Q951.3625,482.7188 951.3625,484.8125 Q951.3625,486.9063 952.05,487.9844 Q952.7375,489.0469 954.0813,489.0469 Q954.7063,489.0469 955.3,488.7813 Q955.8938,488.5 956.5188,487.9219 L956.5188,490.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="970.45" y="489.8467">HostNetworkLink</text><line style="stroke:#181818;stroke-width:0.5;" x1="926.5" x2="1101.5" y1="501" y2="501"/><ellipse cx="936.5" cy="514.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="945.5" y="517.9951">Name string</text><line style="stroke:#181818;stroke-width:1.0;" x1="926.5" x2="1101.5" y1="525.2969" y2="525.2969"/><ellipse cx="936.5" cy="538.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="945.5" y="542.292">Addresses []net.IPNet</text><line style="stroke:#181818;stroke-width:1.0;" x1="926.5" x2="1101.5" y1="549.5938" y2="549.5938"/><ellipse cx="936.5" cy="563.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="945.5" y="566.5889">Type string</text></g><path d="M605.5,479 L605.5,504.1328 A0,0 0 0 0 605.5,504.1328 L867.5,504.1328 A0,0 0 0 0 867.5,504.1328 L867.5,497 L929.5,513.1484 L867.5,489 L867.5,489 L857.5,479 L605.5,479 A0,0 0 0 0 605.5,479 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M857.5,479 L857.5,489 L867.5,489 L857.5,479 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="611.5" y="496.0669">Unique name of the network interface</text><path d="M605.5,514.1328 L605.5,554.3984 A0,0 0 0 0 605.5,554.3984 L890.5,554.3984 A0,0 0 0 0 890.5,554.3984 L890.5,538.2656 L929.5,561.7422 L890.5,530.2656 L890.5,524.1328 L880.5,514.1328 L605.5,514.1328 A0,0 0 0 0 605.5,514.1328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M880.5,514.1328 L880.5,524.1328 L890.5,524.1328 L880.5,514.1328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="611.5" y="531.1997">Default value is "none"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="611.5" y="546.3325">because HostNetworkLink is a basic class</text><!--MD5=[b17b81604319b97b33af23212dfcf2f4]
class HostNetworkDevice--><g id="elem_HostNetworkDevice"><rect codeLine="5" fill="#F1F1F1" height="48" id="HostNetworkDevice" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="704" y="293"/><ellipse cx="719" cy="309" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M721.9688,314.6406 Q721.3906,314.9375 720.75,315.0781 Q720.1094,315.2344 719.4063,315.2344 Q716.9063,315.2344 715.5781,313.5938 Q714.2656,311.9375 714.2656,308.8125 Q714.2656,305.6875 715.5781,304.0313 Q716.9063,302.375 719.4063,302.375 Q720.1094,302.375 720.75,302.5313 Q721.4063,302.6875 721.9688,302.9844 L721.9688,305.7031 Q721.3438,305.125 720.75,304.8594 Q720.1563,304.5781 719.5313,304.5781 Q718.1875,304.5781 717.5,305.6563 Q716.8125,306.7188 716.8125,308.8125 Q716.8125,310.9063 717.5,311.9844 Q718.1875,313.0469 719.5313,313.0469 Q720.1563,313.0469 720.75,312.7813 Q721.3438,312.5 721.9688,311.9219 L721.9688,314.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="733" y="313.8467">HostNetworkDevice</text><line style="stroke:#181818;stroke-width:0.5;" x1="705" x2="871" y1="325" y2="325"/><line style="stroke:#181818;stroke-width:0.5;" x1="705" x2="871" y1="333" y2="333"/></g><!--MD5=[7708bf2b3811a61fdbad496487474248]
class HostNetworkVlan--><g id="elem_HostNetworkVlan"><rect codeLine="5" fill="#F1F1F1" height="80.5938" id="HostNetworkVlan" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="1108" y="276.5"/><ellipse cx="1123" cy="292.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1125.9688,298.1406 Q1125.3906,298.4375 1124.75,298.5781 Q1124.1094,298.7344 1123.4063,298.7344 Q1120.9063,298.7344 1119.5781,297.0938 Q1118.2656,295.4375 1118.2656,292.3125 Q1118.2656,289.1875 1119.5781,287.5313 Q1120.9063,285.875 1123.4063,285.875 Q1124.1094,285.875 1124.75,286.0313 Q1125.4063,286.1875 1125.9688,286.4844 L1125.9688,289.2031 Q1125.3438,288.625 1124.75,288.3594 Q1124.1563,288.0781 1123.5313,288.0781 Q1122.1875,288.0781 1121.5,289.1563 Q1120.8125,290.2188 1120.8125,292.3125 Q1120.8125,294.4063 1121.5,295.4844 Q1122.1875,296.5469 1123.5313,296.5469 Q1124.1563,296.5469 1124.75,296.2813 Q1125.3438,296 1125.9688,295.4219 L1125.9688,298.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1137" y="297.3467">HostNetworkVlan</text><line style="stroke:#181818;stroke-width:0.5;" x1="1109" x2="1257" y1="308.5" y2="308.5"/><ellipse cx="1119" cy="322.1484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1128" y="325.4951">VlanID int</text><line style="stroke:#181818;stroke-width:1.0;" x1="1109" x2="1257" y1="332.7969" y2="332.7969"/><ellipse cx="1119" cy="346.4453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1128" y="349.792">Parent string</text></g><!--MD5=[bd56b3e5eb0134b68fc9951038656522]
class HostNetworkBridge--><g id="elem_HostNetworkBridge"><rect codeLine="5" fill="#F1F1F1" height="80.5938" id="HostNetworkBridge" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="907" y="276.5"/><ellipse cx="922" cy="292.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M924.9688,298.1406 Q924.3906,298.4375 923.75,298.5781 Q923.1094,298.7344 922.4063,298.7344 Q919.9063,298.7344 918.5781,297.0938 Q917.2656,295.4375 917.2656,292.3125 Q917.2656,289.1875 918.5781,287.5313 Q919.9063,285.875 922.4063,285.875 Q923.1094,285.875 923.75,286.0313 Q924.4063,286.1875 924.9688,286.4844 L924.9688,289.2031 Q924.3438,288.625 923.75,288.3594 Q923.1563,288.0781 922.5313,288.0781 Q921.1875,288.0781 920.5,289.1563 Q919.8125,290.2188 919.8125,292.3125 Q919.8125,294.4063 920.5,295.4844 Q921.1875,296.5469 922.5313,296.5469 Q923.1563,296.5469 923.75,296.2813 Q924.3438,296 924.9688,295.4219 L924.9688,298.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="936" y="297.3467">HostNetworkBridge</text><line style="stroke:#181818;stroke-width:0.5;" x1="908" x2="1072" y1="308.5" y2="308.5"/><ellipse cx="918" cy="322.1484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="927" y="325.4951">Slaves []string</text><line style="stroke:#181818;stroke-width:1.0;" x1="908" x2="1072" y1="332.7969" y2="332.7969"/><ellipse cx="918" cy="346.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="927" y="349.792">GetSlaves() []string</text></g><path d="M1292.5,299.5 L1292.5,308.0664 L1059,344.9453 L1292.5,316.0664 L1292.5,324.6328 A0,0 0 0 0 1292.5,324.6328 L1497.5,324.6328 A0,0 0 0 0 1497.5,324.6328 L1497.5,309.5 L1487.5,299.5 L1292.5,299.5 A0,0 0 0 0 1292.5,299.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1487.5,299.5 L1487.5,309.5 L1497.5,309.5 L1487.5,299.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="1298.5" y="316.5669">Get an array of bridge slaves</text><!--MD5=[4df6a62ad1da37074bd36be660276c45]
class HostNetworkTrafficRule--><g id="elem_HostNetworkTrafficRule"><rect codeLine="3" fill="#F1F1F1" height="129.1875" id="HostNetworkTrafficRule" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="377.5" y="457"/><ellipse cx="392.5" cy="473" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M395.4688,478.6406 Q394.8906,478.9375 394.25,479.0781 Q393.6094,479.2344 392.9063,479.2344 Q390.4063,479.2344 389.0781,477.5938 Q387.7656,475.9375 387.7656,472.8125 Q387.7656,469.6875 389.0781,468.0313 Q390.4063,466.375 392.9063,466.375 Q393.6094,466.375 394.25,466.5313 Q394.9063,466.6875 395.4688,466.9844 L395.4688,469.7031 Q394.8438,469.125 394.25,468.8594 Q393.6563,468.5781 393.0313,468.5781 Q391.6875,468.5781 391,469.6563 Q390.3125,470.7188 390.3125,472.8125 Q390.3125,474.9063 391,475.9844 Q391.6875,477.0469 393.0313,477.0469 Q393.6563,477.0469 394.25,476.7813 Q394.8438,476.5 395.4688,475.9219 L395.4688,478.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="406.5" y="477.8467">HostNetworkTrafficRule</text><line style="stroke:#181818;stroke-width:0.5;" x1="378.5" x2="569.5" y1="489" y2="489"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="383.5" y="505.9951">Chain string</text><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="569.5" y1="513.2969" y2="513.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="383.5" y="530.292">Target string</text><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="569.5" y1="537.5938" y2="537.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="383.5" y="554.5889">Source string</text><line style="stroke:#181818;stroke-width:1.0;" x1="378.5" x2="569.5" y1="561.8906" y2="561.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="383.5" y="578.8857">Destination string</text></g><!--MD5=[58987b0398bdf5010f5174b6a6feac3c]
class HostNetworkConfig--><g id="elem_HostNetworkConfig"><rect codeLine="8" fill="#F1F1F1" height="129.1875" id="HostNetworkConfig" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="231" x="772.5" y="45"/><ellipse cx="817.25" cy="61" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M820.2188,66.6406 Q819.6406,66.9375 819,67.0781 Q818.3594,67.2344 817.6563,67.2344 Q815.1563,67.2344 813.8281,65.5938 Q812.5156,63.9375 812.5156,60.8125 Q812.5156,57.6875 813.8281,56.0313 Q815.1563,54.375 817.6563,54.375 Q818.3594,54.375 819,54.5313 Q819.6563,54.6875 820.2188,54.9844 L820.2188,57.7031 Q819.5938,57.125 819,56.8594 Q818.4063,56.5781 817.7813,56.5781 Q816.4375,56.5781 815.75,57.6563 Q815.0625,58.7188 815.0625,60.8125 Q815.0625,62.9063 815.75,63.9844 Q816.4375,65.0469 817.7813,65.0469 Q818.4063,65.0469 819,64.7813 Q819.5938,64.5 820.2188,63.9219 L820.2188,66.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="837.75" y="65.8467">HostNetworkConfig</text><line style="stroke:#181818;stroke-width:0.5;" x1="773.5" x2="1002.5" y1="77" y2="77"/><ellipse cx="783.5" cy="90.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="205" x="792.5" y="93.9951">Devices []HostNetworkDevice</text><line style="stroke:#181818;stroke-width:1.0;" x1="773.5" x2="1002.5" y1="101.2969" y2="101.2969"/><ellipse cx="783.5" cy="114.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="792.5" y="118.292">Vlans   []HostNetworkVlan</text><line style="stroke:#181818;stroke-width:1.0;" x1="773.5" x2="1002.5" y1="125.5938" y2="125.5938"/><ellipse cx="783.5" cy="139.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="201" x="792.5" y="142.5889">Bridges []HostNetworkBridge</text><line style="stroke:#181818;stroke-width:1.0;" x1="773.5" x2="1002.5" y1="149.8906" y2="149.8906"/><ellipse cx="783.5" cy="163.5391" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="792.5" y="166.8857">TrafficRules TrafficRules</text></g><!--MD5=[1abd5d28a97ba974f492516d1fdb0ac6]
class TrafficRules--><g id="elem_TrafficRules"><rect codeLine="18" fill="#F1F1F1" height="153.4844" id="TrafficRules" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="256" x="30" y="241"/><ellipse cx="113.75" cy="257" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M116.7188,262.6406 Q116.1406,262.9375 115.5,263.0781 Q114.8594,263.2344 114.1563,263.2344 Q111.6563,263.2344 110.3281,261.5938 Q109.0156,259.9375 109.0156,256.8125 Q109.0156,253.6875 110.3281,252.0313 Q111.6563,250.375 114.1563,250.375 Q114.8594,250.375 115.5,250.5313 Q116.1563,250.6875 116.7188,250.9844 L116.7188,253.7031 Q116.0938,253.125 115.5,252.8594 Q114.9063,252.5781 114.2813,252.5781 Q112.9375,252.5781 112.25,253.6563 Q111.5625,254.7188 111.5625,256.8125 Q111.5625,258.9063 112.25,259.9844 Q112.9375,261.0469 114.2813,261.0469 Q114.9063,261.0469 115.5,260.7813 Q116.0938,260.5 116.7188,259.9219 L116.7188,262.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="134.25" y="261.8467">TrafficRules</text><line style="stroke:#181818;stroke-width:0.5;" x1="31" x2="285" y1="273" y2="273"/><ellipse cx="41" cy="286.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208" x="50" y="289.9951">Filter []HostNetworkTrafficRule</text><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="285" y1="297.2969" y2="297.2969"/><ellipse cx="41" cy="310.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="50" y="314.292">NAT []HostNetworkTrafficRule</text><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="285" y1="321.5938" y2="321.5938"/><ellipse cx="41" cy="335.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="50" y="338.5889">Mangle []HostNetworkTrafficRule</text><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="285" y1="345.8906" y2="345.8906"/><ellipse cx="41" cy="359.5391" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="204" x="50" y="362.8857">Raw []HostNetworkTrafficRule</text><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="285" y1="370.1875" y2="370.1875"/><ellipse cx="41" cy="383.8359" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230" x="50" y="387.1826">Security []HostNetworkTrafficRule</text></g><g id="elem_NetworkTrafficRuleNote"><path d="M329,297 L329,337.2656 L669,337.2656 L669,307 L659,297 L329,297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M659,297 L659,307 L669,307 L659,297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="335" y="314.0669">Since traffic rules are stored in the .yaml config</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="315" x="339" y="329.1997">we need to split all netfilter tables into class fields</text></g><!--MD5=[0ef4b9020a0ab381891be386a00db524]
class YamlHostNetworkConfigStorage--><g id="elem_YamlHostNetworkConfigStorage"><rect codeLine="5" fill="#F1F1F1" height="64.2969" id="YamlHostNetworkConfigStorage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="252" x="1718" y="489.5"/><ellipse cx="1733" cy="505.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1735.9688,511.1406 Q1735.3906,511.4375 1734.75,511.5781 Q1734.1094,511.7344 1733.4063,511.7344 Q1730.9063,511.7344 1729.5781,510.0938 Q1728.2656,508.4375 1728.2656,505.3125 Q1728.2656,502.1875 1729.5781,500.5313 Q1730.9063,498.875 1733.4063,498.875 Q1734.1094,498.875 1734.75,499.0313 Q1735.4063,499.1875 1735.9688,499.4844 L1735.9688,502.2031 Q1735.3438,501.625 1734.75,501.3594 Q1734.1563,501.0781 1733.5313,501.0781 Q1732.1875,501.0781 1731.5,502.1563 Q1730.8125,503.2188 1730.8125,505.3125 Q1730.8125,507.4063 1731.5,508.4844 Q1732.1875,509.5469 1733.5313,509.5469 Q1734.1563,509.5469 1734.75,509.2813 Q1735.3438,509 1735.9688,508.4219 L1735.9688,511.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="220" x="1747" y="510.3467">YamlHostNetworkConfigStorage</text><line style="stroke:#181818;stroke-width:0.5;" x1="1719" x2="1969" y1="521.5" y2="521.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1726" y="532.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="1738" y="538.4951">configFilePath string</text><line style="stroke:#181818;stroke-width:0.5;" x1="1719" x2="1969" y1="545.7969" y2="545.7969"/></g><!--MD5=[9e1d7ce1192ca49e51cccbdad1af1931]
class HostNetworkManager--><g id="elem_HostNetworkManager"><rect codeLine="7" fill="#F1F1F1" height="80.5938" id="HostNetworkManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="392" x="2013" y="481.5"/><ellipse cx="2130.25" cy="497.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2133.2188,503.1406 Q2132.6406,503.4375 2132,503.5781 Q2131.3594,503.7344 2130.6563,503.7344 Q2128.1563,503.7344 2126.8281,502.0938 Q2125.5156,500.4375 2125.5156,497.3125 Q2125.5156,494.1875 2126.8281,492.5313 Q2128.1563,490.875 2130.6563,490.875 Q2131.3594,490.875 2132,491.0313 Q2132.6563,491.1875 2133.2188,491.4844 L2133.2188,494.2031 Q2132.5938,493.625 2132,493.3594 Q2131.4063,493.0781 2130.7813,493.0781 Q2129.4375,493.0781 2128.75,494.1563 Q2128.0625,495.2188 2128.0625,497.3125 Q2128.0625,499.4063 2128.75,500.4844 Q2129.4375,501.5469 2130.7813,501.5469 Q2131.4063,501.5469 2132,501.2813 Q2132.5938,501 2133.2188,500.4219 L2133.2188,503.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="2150.75" y="502.3467">HostNetworkManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="2014" x2="2404" y1="513.5" y2="513.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2021" y="524.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="366" x="2033" y="530.4951">configStorage  interfaces.IHostNetworkConfigStorage</text><line style="stroke:#181818;stroke-width:1.0;" x1="2014" x2="2404" y1="537.7969" y2="537.7969"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2021" y="548.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="2033" y="554.792">hasUnsavedChanges bool</text></g><!--MD5=[c7ae537b1fb1fd62da54845b02126a57]
link HostNetworkLink to IHostNetworkLink--><g id="link_HostNetworkLink_IHostNetworkLink"><path codeLine="21" d="M1014,574.08 C1014,655.06 1014,812.26 1014,904.23 " fill="none" id="HostNetworkLink-to-IHostNetworkLink" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1021,904.47,1014,924.47,1007,904.47,1021,904.47" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7c0130aaa2dc79170695f96da00ebff9]
link HostNetworkDevice to HostNetworkLink--><g id="link_HostNetworkDevice_HostNetworkLink"><path codeLine="7" d="M813.93,341.23 C846.05,370.01 901.99,420.13 946.56,460.08 " fill="none" id="HostNetworkDevice-to-HostNetworkLink" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="956.47,468.95,954.673,461.9664,947.5354,460.9392,949.3324,467.9228,956.47,468.95" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f741d5613818e7c6a8b6721c8e9fb611]
link HostNetworkVlan to HostNetworkLink--><g id="link_HostNetworkVlan_HostNetworkLink"><path codeLine="11" d="M1150.01,357.52 C1125.99,386.31 1092.98,425.87 1065.49,458.8 " fill="none" id="HostNetworkVlan-to-HostNetworkLink" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1057.15,468.79,1064.0666,466.7502,1064.8439,459.5811,1057.9273,461.6209,1057.15,468.79" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[dba085063a1d972b71adca959eac56ab]
link HostNetworkBridge to HostNetworkLink--><g id="link_HostNetworkBridge_HostNetworkLink"><path codeLine="11" d="M994.68,357.52 C997.99,385.45 1002.5,423.49 1006.33,455.8 " fill="none" id="HostNetworkBridge-to-HostNetworkLink" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1007.87,468.79,1011.137,462.3614,1006.4595,456.8732,1003.1925,463.3018,1007.87,468.79" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[22922eb5c98d6328bffadf0fffe1f4a9]
link HostNetworkConfig to HostNetworkDevice--><g id="link_HostNetworkConfig_HostNetworkDevice"><path codeLine="30" d="M772,89 C690.81,89 750.28,235.27 776.9,292.98 " fill="none" id="HostNetworkConfig-HostNetworkDevice" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[3939eded06239bcaaa875b04c4955c10]
link HostNetworkConfig to HostNetworkVlan--><g id="link_HostNetworkConfig_HostNetworkVlan"><path codeLine="31" d="M1005,113 C1091.01,113 1145.17,217.3 1168.95,276.38 " fill="none" id="HostNetworkConfig-HostNetworkVlan" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9daca89a698ab2c397b62c91a9aa8944]
link HostNetworkConfig to HostNetworkBridge--><g id="link_HostNetworkConfig_HostNetworkBridge"><path codeLine="32" d="M1005,137 C1060.51,137 1031.57,223.54 1008.79,276.27 " fill="none" id="HostNetworkConfig-HostNetworkBridge" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5a0fd3ba2c81e532df98bfffdf79ed38]
link HostNetworkConfig to TrafficRules--><g id="link_HostNetworkConfig_TrafficRules"><path codeLine="33" d="M772,161 C564.35,161 508.11,171.68 311,237 C305.47,238.83 299.89,240.85 294.3,243 " fill="none" id="HostNetworkConfig-TrafficRules" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f6f72487f3d250d8769ac80e8ccb2105]
link NetworkTrafficRuleNote to TrafficRules--><!--MD5=[5a18eaea5e24513923bf7f5ea5ee84f8]
link TrafficRules to NetworkTrafficRuleNote--><g id="link_TrafficRules_NetworkTrafficRuleNote"><path codeLine="43" d="M287,285 C303.49,287.96 320.63,291.37 337.69,294.89 " fill="none" id="TrafficRules-NetworkTrafficRuleNote" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="337.69" x2="347.72" y1="294.89" y2="296.98"/></g><!--MD5=[5a18eaea5e24513923bf7f5ea5ee84f8]
link TrafficRules to NetworkTrafficRuleNote--><g id="link_TrafficRules_NetworkTrafficRuleNote"><path codeLine="44" d="M287,309 C297.28,309 307.84,309.1 318.49,309.27 " fill="none" id="TrafficRules-NetworkTrafficRuleNote-1" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="318.49" x2="328.73" y1="309.27" y2="309.45"/></g><!--MD5=[5a18eaea5e24513923bf7f5ea5ee84f8]
link TrafficRules to NetworkTrafficRuleNote--><g id="link_TrafficRules_NetworkTrafficRuleNote"><path codeLine="45" d="M287,333 C297.3,333 307.88,332.81 318.54,332.47 " fill="none" id="TrafficRules-NetworkTrafficRuleNote-2" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="318.54" x2="328.79" y1="332.47" y2="332.09"/></g><!--MD5=[5a18eaea5e24513923bf7f5ea5ee84f8]
link TrafficRules to NetworkTrafficRuleNote--><g id="link_TrafficRules_NetworkTrafficRuleNote"><path codeLine="46" d="M287,357 C330.82,357 378.89,348.57 418.06,339.45 " fill="none" id="TrafficRules-NetworkTrafficRuleNote-3" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.06" x2="427.81" y1="339.45" y2="337.12"/></g><!--MD5=[5a18eaea5e24513923bf7f5ea5ee84f8]
link TrafficRules to NetworkTrafficRuleNote--><g id="link_TrafficRules_NetworkTrafficRuleNote"><path codeLine="47" d="M287,381 C344.12,381 406.34,359.26 448.3,341.12 " fill="none" id="TrafficRules-NetworkTrafficRuleNote-4" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="448.3" x2="457.47" y1="341.12" y2="337.07"/></g><!--MD5=[11cf39667170caf120925c445fb13f55]
link NetworkTrafficRuleNote to HostNetworkTrafficRule--><g id="link_NetworkTrafficRuleNote_HostNetworkTrafficRule"><path codeLine="49" d="M496.65,337.05 C493.44,363.06 487.51,411.06 482.53,451.43 " fill="none" id="NetworkTrafficRuleNote-to-HostNetworkTrafficRule" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="481.86,456.82,486.9125,448.3659,482.4608,451.8562,478.9704,447.4046,481.86,456.82" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4b27b58a3dcdc7721ce2906e479ec2a1]
link YamlHostNetworkConfigStorage to IHostNetworkConfigStorage--><g id="link_YamlHostNetworkConfigStorage_IHostNetworkConfigStorage"><path codeLine="9" d="M1717.93,547.63 C1668.86,562.08 1614.56,584.3 1573,618 C1477.96,695.06 1413.73,825.32 1380.83,905.67 " fill="none" id="YamlHostNetworkConfigStorage-to-IHostNetworkConfigStorage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1387.24,908.48,1373.33,924.46,1374.24,903.29,1387.24,908.48" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5a77e35d18a67292d31d635cffa38ea2]
link HostNetworkManager to YamlHostNetworkConfigStorage--><g id="link_HostNetworkManager_YamlHostNetworkConfigStorage"><path codeLine="13" d="M2012,525.5 C2001.78,525.5 1991.21,525.42 1980.58,525.29 " fill="none" id="HostNetworkManager-YamlHostNetworkConfigStorage" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1980.58" x2="1970.38" y1="525.29" y2="525.15"/></g><!--MD5=[8da93bdfc8a67e29cf06757d442ac4df]
link YamlHostNetworkConfigStorage to HostNetworkManager--><!--MD5=[3dcecfe70558689b84244a7b11eaea24]
link HostNetworkManager to IHostNetworkManager--><g id="link_HostNetworkManager_IHostNetworkManager"><path codeLine="14" d="M2222.39,565.57 C2234.17,603.46 2252.36,661.96 2271.35,723.04 " fill="none" id="HostNetworkManager-to-IHostNetworkManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2278.15,721.32,2277.4,742.49,2264.78,725.47,2278.15,721.32" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[02947ec8b88f32380f5c58379defe0de]
@startuml

!include ../entities/HostNetworkConfig.puml
!include ../interfaces/IHostNetworkManager.puml
!include ../storages/YamlHostNetworkConfigStorage.puml

package infrastructure {
    class HostNetworkManager {
        -configStorage  interfaces.IHostNetworkConfigStorage
        - -
        -hasUnsavedChanges bool
    }

    HostNetworkManager::configStorage - - YamlHostNetworkConfigStorage
    HostNetworkManager -down-|> IHostNetworkManager
    HostNetworkManager -[hidden]left- YamlHostNetworkConfigStorage
}

@enduml

@startuml





package app {
    interface IHostNetworkLink {
        +GetName() string
        - -
        +GetType() string
        - -
        +GetAddresses() []net.IPNet
    }

    note left of IHostNetworkLink::GetName
    Gets host interface name
    end note

    note left of IHostNetworkLink::GetType
    Gets host interface type
    end note

    note left of IHostNetworkLink::GetAddresses
    Gets host interface addresses
    end note
}


package domain {
    class HostNetworkLink {
        +Name string
        - -
        +Addresses []net.IPNet
        - -
        +Type string
    }
    note left of HostNetworkLink::Name
    Unique name of the network interface
    end note

    note left of HostNetworkLink::Type
    Default value is "none"
    because HostNetworkLink is a basic class
    end note

    HostNetworkLink - -|> IHostNetworkLink
}


package domain {
    class HostNetworkDevice

    HostNetworkDevice - -* HostNetworkLink
}



package domain {
    class HostNetworkVlan {
        +VlanID int
        - -
        +Parent string
    }

    HostNetworkVlan - -* HostNetworkLink
}



package domain {
    class HostNetworkBridge {
        +Slaves []string
        - -
        +GetSlaves() []string
    }

    HostNetworkBridge - -* HostNetworkLink

    note right of HostNetworkBridge::GetSlaves
        Get an array of bridge slaves
    end note
}




package domain {
    class HostNetworkTrafficRule {
        Chain string
        - -
        Target string
        - -
        Source string
        - -
        Destination string
    }
}


package domain {
    class HostNetworkConfig {
        +Devices []HostNetworkDevice
        - -
        +Vlans   []HostNetworkVlan
        - -
        +Bridges []HostNetworkBridge
        - -
        +TrafficRules TrafficRules
    }

    class TrafficRules {
        +Filter []HostNetworkTrafficRule
        - -
        +NAT []HostNetworkTrafficRule
        - -
        +Mangle []HostNetworkTrafficRule
        - -
        +Raw []HostNetworkTrafficRule
        - -
        +Security []HostNetworkTrafficRule
    }

    HostNetworkConfig::Devices - - HostNetworkDevice
    HostNetworkConfig::Vlans - - HostNetworkVlan
    HostNetworkConfig::Bridges - - HostNetworkBridge
    HostNetworkConfig::TrafficRules - - TrafficRules

    note as NetworkTrafficRuleNote
        Since traffic rules are stored in the .yaml config
         we need to split all netfilter tables into class fields
    end note

    TrafficRules .l[hidden]. NetworkTrafficRuleNote


    TrafficRules::Filter .. NetworkTrafficRuleNote
    TrafficRules::NAT .. NetworkTrafficRuleNote
    TrafficRules::Mangle .. NetworkTrafficRuleNote
    TrafficRules::Raw .. NetworkTrafficRuleNote
    TrafficRules::Security .. NetworkTrafficRuleNote

    NetworkTrafficRuleNote ..> HostNetworkTrafficRule
}



package app {
    interface IHostNetworkManager {
        +GetList() ([]IHostNetworkLink, error)
        - -
        +GetByName(name string) (IHostNetworkLink, error)
        - -
        +CreateVlan(master string, vlanID int) (string, error)
        - -
        +CreateBridge(name string) (string, error)
        - -
        +SetLinkMaster(slaveName, masterName string) error
        - -
        +UnsetLinkMaster(linkName string) error
        - -
        +SetLinkUp(linkName string) error
        - -
        +DeleteLinkByName(name string) error
        - -
        +AddrAdd(linkName string, addr net.IPNet) error
        - -
        +AddrDelete(linkName string, addr net.IPNet) error
        - -
        +CreateTrafficRule(table string, rule HostNetworkTrafficRule) (HostNetworkTrafficRule, error)
        - -
        +DeleteTrafficRule(table string, rule HostNetworkTrafficRule) error
        - -
        +GetChainRules(table string, chain string) ([]HostNetworkTrafficRule, error)
        - -
        +GetTableRules(table string) ([]HostNetworkTrafficRule, error)
        - -
        +SaveConfiguration() error
        - -
        +RestoreFromBackup() error
        - -
        +ResetChanges() error
        - -
        +HasUnsavedChanges() bool
    }

    note left of IHostNetworkManager::GetList
    Gets list of host network interfaces
    end note

    note left of IHostNetworkManager::GetByName
    Gets host network interface by its name
    end note

    note left of IHostNetworkManager::CreateVlan
    Create host vlan interface with name rol.{Master}.{VlanID}
    end note

    note left of IHostNetworkManager::CreateBridge
    Create host bridge interface with name rol.br.{Name}
    end note

    note left of IHostNetworkManager::SetLinkMaster
    Set master for link
    end note

    note left of IHostNetworkManager::UnsetLinkMaster
    Removes the master of the link
    end note

    note left of IHostNetworkManager::SetLinkUp
    Enables the link on host
    end note

    note left of IHostNetworkManager::DeleteLinkByName
    Deletes interface on host by its name
    end note

    note left of IHostNetworkManager::AddrAdd
    Add new ip address for network interface
    end note

    note left of IHostNetworkManager::AddrDelete
    Delete ip address for network interface
    end note

    note left of IHostNetworkManager::CreateTrafficRule
    Create netfilter traffic rule for specified table
    end note

    note left of IHostNetworkManager::DeleteTrafficRule
    Delete netfilter traffic rule in specified table
    end note

    note left of IHostNetworkManager::GetChainRules
    Get selected netfilter chain rules at specified table
    end note

    note left of IHostNetworkManager::GetTableRules
    Get specified netfilter table rules
    end note

    note left of IHostNetworkManager::SaveConfiguration
    Save current host network configuration to the storage
    end note

    note left of IHostNetworkManager::RestoreFromBackup
    Restore and apply host network configuration from backup
    end note

    note left of IHostNetworkManager::ResetChanges
    Reset all applied changes to state from saved configuration
    end note

    note left of IHostNetworkManager::HasUnsavedChanges
    Gets a flag about unsaved changes
    end note
}




package app {
    interface IHostNetworkConfigStorage {
        +SaveConfig(config domain.HostNetworkConfig) error
        - -
        +GetConfig() (domain.HostNetworkConfig, error)
        - -
        +GetBackupConfig() (domain.HostNetworkConfig, error)
    }
}


package infrastructure {
    class YamlHostNetworkConfigStorage {
        -configFilePath string
    }

    YamlHostNetworkConfigStorage - -|> IHostNetworkConfigStorage
}


package infrastructure {
    class HostNetworkManager {
        -configStorage  interfaces.IHostNetworkConfigStorage
        - -
        -hasUnsavedChanges bool
    }

    HostNetworkManager::configStorage - - YamlHostNetworkConfigStorage
    HostNetworkManager -down-|> IHostNetworkManager
    HostNetworkManager -[hidden]left- YamlHostNetworkConfigStorage
}

@enduml

PlantUML version 1.2022.12(Sun Oct 23 18:12:26 EGST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>