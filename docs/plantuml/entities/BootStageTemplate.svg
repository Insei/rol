<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="468px" preserveAspectRatio="none" style="width:674px;height:468px;background:#FFFFFF;" version="1.1" viewBox="0 0 674 468" width="674px" zoomAndPan="magnify"><defs/><g><!--MD5=[27f772719433d509ddbc20ff768eba08]
cluster domain--><g id="cluster_domain"><path d="M8.5,6 L60.5,6 A3.75,3.75 0 0 1 63,8.5 L70,29.6094 L644.5,29.6094 A2.5,2.5 0 0 1 647,32.1094 L647,458.5 A2.5,2.5 0 0 1 644.5,461 L8.5,461 A2.5,2.5 0 0 1 6,458.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " style="stroke:#000000;stroke-width:1.5;fill:none;"/><line style="stroke:#000000;stroke-width:1.5;fill:none;" x1="6" x2="70" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="51" x="10" y="22.5332">domain</text></g><!--MD5=[7885a1e79022bd13a786b4cdad8db080]
class BootStageTemplate--><g id="elem_BootStageTemplate"><rect codeLine="3" fill="#F1F1F1" height="134.4375" id="BootStageTemplate" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="216" x="407" y="154"/><ellipse cx="448.55" cy="170" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M451.3156,165.875 Q451.4719,165.6563 451.6594,165.5469 Q451.8469,165.4375 452.0656,165.4375 Q452.4406,165.4375 452.675,165.7031 Q452.9094,165.9531 452.9094,166.5625 L452.9094,168.0156 Q452.9094,168.625 452.675,168.8906 Q452.4406,169.1563 452.0656,169.1563 Q451.7219,169.1563 451.5188,168.9531 Q451.3156,168.7656 451.2063,168.25 Q451.1594,167.8906 450.9719,167.7031 Q450.6438,167.3281 450.0344,167.1094 Q449.425,166.8906 448.8,166.8906 Q448.0344,166.8906 447.3938,167.2188 Q446.7688,167.5469 446.2688,168.2969 Q445.7844,169.0469 445.7844,170.0781 L445.7844,171.1719 Q445.7844,172.4063 446.675,173.2344 Q447.5656,174.0469 449.1594,174.0469 Q450.0969,174.0469 450.7531,173.7969 Q451.1438,173.6406 451.5656,173.2031 Q451.8313,172.9375 451.9719,172.8594 Q452.1281,172.7813 452.3313,172.7813 Q452.6594,172.7813 452.9094,173.0469 Q453.175,173.2969 453.175,173.6406 Q453.175,173.9844 452.8313,174.3906 Q452.3313,174.9688 451.5344,175.2969 Q450.4563,175.75 449.1594,175.75 Q447.6438,175.75 446.4406,175.125 Q445.4563,174.625 444.7688,173.5625 Q444.0813,172.4844 444.0813,171.2031 L444.0813,170.0469 Q444.0813,168.7188 444.6906,167.5781 Q445.3156,166.4219 446.4094,165.8125 Q447.5031,165.1875 448.7375,165.1875 Q449.4719,165.1875 450.1125,165.3594 Q450.7688,165.5156 451.3156,165.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="468.45" y="175.7285">BootStageTemplate</text><line style="stroke:#181818;stroke-width:0.5;" x1="408" x2="622" y1="186" y2="186"/><ellipse cx="418" cy="197" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="427" y="204.5332">Name string</text><line style="stroke:#181818;stroke-width:1.0;" x1="408" x2="622" y1="211.6094" y2="211.6094"/><ellipse cx="418" cy="222.6094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="427" y="230.1426">Description string</text><line style="stroke:#181818;stroke-width:1.0;" x1="408" x2="622" y1="237.2188" y2="237.2188"/><ellipse cx="418" cy="248.2188" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="427" y="255.752">Action string</text><line style="stroke:#181818;stroke-width:1.0;" x1="408" x2="622" y1="262.8281" y2="262.8281"/><ellipse cx="418" cy="273.8281" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="427" y="281.3613">Files []BootStageTemplateFile</text></g><!--MD5=[b52e4b02592e8087d88e253407fc28e5]
class BootStageTemplateFile--><g id="elem_BootStageTemplateFile"><rect codeLine="13" fill="#F1F1F1" height="83.2188" id="BootStageTemplateFile" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="435" y="359"/><ellipse cx="450" cy="375" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M452.7656,370.875 Q452.9219,370.6563 453.1094,370.5469 Q453.2969,370.4375 453.5156,370.4375 Q453.8906,370.4375 454.125,370.7031 Q454.3594,370.9531 454.3594,371.5625 L454.3594,373.0156 Q454.3594,373.625 454.125,373.8906 Q453.8906,374.1563 453.5156,374.1563 Q453.1719,374.1563 452.9688,373.9531 Q452.7656,373.7656 452.6563,373.25 Q452.6094,372.8906 452.4219,372.7031 Q452.0938,372.3281 451.4844,372.1094 Q450.875,371.8906 450.25,371.8906 Q449.4844,371.8906 448.8438,372.2188 Q448.2188,372.5469 447.7188,373.2969 Q447.2344,374.0469 447.2344,375.0781 L447.2344,376.1719 Q447.2344,377.4063 448.125,378.2344 Q449.0156,379.0469 450.6094,379.0469 Q451.5469,379.0469 452.2031,378.7969 Q452.5938,378.6406 453.0156,378.2031 Q453.2813,377.9375 453.4219,377.8594 Q453.5781,377.7813 453.7813,377.7813 Q454.1094,377.7813 454.3594,378.0469 Q454.625,378.2969 454.625,378.6406 Q454.625,378.9844 454.2813,379.3906 Q453.7813,379.9688 452.9844,380.2969 Q451.9063,380.75 450.6094,380.75 Q449.0938,380.75 447.8906,380.125 Q446.9063,379.625 446.2188,378.5625 Q445.5313,377.4844 445.5313,376.2031 L445.5313,375.0469 Q445.5313,373.7188 446.1406,372.5781 Q446.7656,371.4219 447.8594,370.8125 Q448.9531,370.1875 450.1875,370.1875 Q450.9219,370.1875 451.5625,370.3594 Q452.2188,370.5156 452.7656,370.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="464" y="380.7285">BootStageTemplateFile</text><line style="stroke:#181818;stroke-width:0.5;" x1="436" x2="614" y1="391" y2="391"/><ellipse cx="446" cy="402" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="455" y="409.5332">ExistingFileName string</text><line style="stroke:#181818;stroke-width:1.0;" x1="436" x2="614" y1="416.6094" y2="416.6094"/><ellipse cx="446" cy="427.6094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="455" y="435.1426">VirtualFileName</text></g><g id="elem_GMN224"><path d="M133,42 L133,84.7031 A0,0 0 0 0 133,84.7031 L395.66,84.7031 L455.35,149.98 L403.66,84.7031 L631,84.7031 A0,0 0 0 0 631,84.7031 L631,52 L621,42 L133,42 A0,0 0 0 0 133,42 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M621,42 L621,52 L631,52 L621,42 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="465" x="139" y="60.4951">Boot stage can be overwritten in runtime by device entity or by device rent entity.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="477" x="139" y="76.8467">BootStageTemplate converts to BootStage for device, then we create device entity.</text></g><path d="M22.5,145 L22.5,285.8125 A0,0 0 0 0 22.5,285.8125 L363.5,285.8125 A0,0 0 0 0 363.5,285.8125 L363.5,219.4063 L411,250.0234 L363.5,211.4063 L363.5,155 L353.5,145 L22.5,145 A0,0 0 0 0 22.5,145 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M353.5,145 L353.5,155 L363.5,155 L353.5,145 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="28.5" y="163.4951">Action for this boot stage.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="28.5" y="179.8467">Can be: File, CheckPowerSwitch, EmergencyPowerOff,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="28.5" y="196.1982">PowerOff, EmergencyPowerOn, PowerOn,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="28.5" y="212.5498">CheckManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="28.5" y="228.9014">For File action:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="44.5" y="245.2529">A stage can only be marked complete if all files have</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="44.5" y="261.6045">been downloaded by the device via TFTP or DHCP,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="44.5" y="277.9561">after which the next step can be loaded.</text><path d="M22,356 L22,398.7031 A0,0 0 0 0 22,398.7031 L400,398.7031 A0,0 0 0 0 400,398.7031 L400,381.3516 L439,403.8047 L400,373.3516 L400,366 L390,356 L22,356 A0,0 0 0 0 22,356 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M390,356 L390,366 L400,366 L390,356 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="28" y="374.4951">Existing file name is a real full file path with name on the disk.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="28" y="390.8467">This path is relative from app directory</text><path d="M22,408.7031 L22,435.0547 A0,0 0 0 0 22,435.0547 L326,435.0547 A0,0 0 0 0 326,435.0547 L326,426.7031 L439,429.4141 L326,418.7031 L326,418.7031 L316,408.7031 L22,408.7031 A0,0 0 0 0 22,408.7031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M316,408.7031 L316,418.7031 L326,418.7031 L316,408.7031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="28" y="427.1982">Virtual file name is relative from /&lt;mac-address&gt;/</text><!--MD5=[0381bb59898f3a371ff9d90742c0dc4e]
link BootStageTemplate to BootStageTemplateFile--><g id="link_BootStageTemplate_BootStageTemplateFile"><path codeLine="19" d="M624,275.5 C667.52,275.5 619.61,322.73 576.55,358.9 " fill="none" id="BootStageTemplate-BootStageTemplateFile" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[717212e863dbcbda8506483ad2ed30b2]
@startuml

package domain {
    class BootStageTemplate {
        +Name string
        - -
        +Description string
        - -
        +Action string
        - -
        +Files []BootStageTemplateFile
    }

    class BootStageTemplateFile {
        +ExistingFileName string
        - -
        +VirtualFileName
    }

    BootStageTemplate::Files - - BootStageTemplateFile

    note top of BootStageTemplate
    Boot stage can be overwritten in runtime by device entity or by device rent entity.
    BootStageTemplate converts to BootStage for device, then we create device entity.
    end note

    note left of BootStageTemplate::Action
    Action for this boot stage.
    Can be: File, CheckPowerSwitch, EmergencyPowerOff,
    PowerOff, EmergencyPowerOn, PowerOn,
    CheckManagement
    For File action:
        A stage can only be marked complete if all files have
        been downloaded by the device via TFTP or DHCP,
        after which the next step can be loaded.
    end note

    note left of BootStageTemplateFile::ExistingFileName
    Existing file name is a real full file path with name on the disk.
    This path is relative from app directory
    end note

    note left of BootStageTemplateFile::VirtualFileName
    Virtual file name is relative from /<mac-address>/
    end note
}

@enduml

PlantUML version 1.2022.6(Tue Jun 21 20:34:49 MSK 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1251
Language: ru
Country: RU
--></g></svg>