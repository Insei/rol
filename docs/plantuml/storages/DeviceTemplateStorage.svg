<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="839px" preserveAspectRatio="none" style="width:2736px;height:839px;background:#FFFFFF;" version="1.1" viewBox="0 0 2736 839" width="2736px" zoomAndPan="magnify"><defs/><g><!--MD5=[d5ac3844f66b12d9e08170e47495e096]
cluster app--><g id="cluster_app"><path d="M1759.5,646 L1786.5,646 A3.75,3.75 0 0 1 1789,648.5 L1796,669.6094 L2726.5,669.6094 A2.5,2.5 0 0 1 2729,672.1094 L2729,829.5 A2.5,2.5 0 0 1 2726.5,832 L1759.5,832 A2.5,2.5 0 0 1 1757,829.5 L1757,648.5 A2.5,2.5 0 0 1 1759.5,646 " style="stroke:#000000;stroke-width:1.5;fill:none;"/><line style="stroke:#000000;stroke-width:1.5;fill:none;" x1="1757" x2="1796" y1="669.6094" y2="669.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1761" y="662.5332">app</text></g><!--MD5=[77349be1bd27b81b697a0f9b3aded3c8]
cluster infrastructure--><g id="cluster_infrastructure"><path d="M1917.5,6 L2015.5,6 A3.75,3.75 0 0 1 2018,8.5 L2025,29.6094 L2250.5,29.6094 A2.5,2.5 0 0 1 2253,32.1094 L2253,475 A2.5,2.5 0 0 1 2250.5,477.5 L1917.5,477.5 A2.5,2.5 0 0 1 1915,475 L1915,8.5 A2.5,2.5 0 0 1 1917.5,6 " style="stroke:#000000;stroke-width:1.5;fill:none;"/><line style="stroke:#000000;stroke-width:1.5;fill:none;" x1="1915" x2="2025" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="97" x="1919" y="22.5332">infrastructure</text></g><!--MD5=[27f772719433d509ddbc20ff768eba08]
cluster domain--><g id="cluster_domain"><path d="M8.5,114 L60.5,114 A3.75,3.75 0 0 1 63,116.5 L70,137.6094 L1730.5,137.6094 A2.5,2.5 0 0 1 1733,140.1094 L1733,825 A2.5,2.5 0 0 1 1730.5,827.5 L8.5,827.5 A2.5,2.5 0 0 1 6,825 L6,116.5 A2.5,2.5 0 0 1 8.5,114 " style="stroke:#000000;stroke-width:1.5;fill:none;"/><line style="stroke:#000000;stroke-width:1.5;fill:none;" x1="6" x2="70" y1="137.6094" y2="137.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="51" x="10" y="130.5332">domain</text></g><!--MD5=[3beb778f651b40286c3d75d0060d5ff1]
class IGenericTemplateStorage--><g id="elem_IGenericTemplateStorage"><rect codeLine="3" fill="#F1F1F1" height="134.4375" id="IGenericTemplateStorage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="939" x="1773.5" y="682"/><ellipse cx="2115.75" cy="698" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2116.7031,694.6406 L2116.7031,701.2969 L2118.4219,701.2969 Q2119.0313,701.2969 2119.2969,701.5313 Q2119.5625,701.7656 2119.5625,702.1563 Q2119.5625,702.5313 2119.2969,702.7656 Q2119.0313,703 2118.4219,703 L2113.2813,703 Q2112.6719,703 2112.4063,702.7656 Q2112.1406,702.5313 2112.1406,702.1406 Q2112.1406,701.7656 2112.4063,701.5313 Q2112.6719,701.2969 2113.2813,701.2969 L2115,701.2969 L2115,694.6406 L2113.2813,694.6406 Q2112.6719,694.6406 2112.4063,694.4063 Q2112.1406,694.1719 2112.1406,693.7813 Q2112.1406,693.4063 2112.4063,693.1719 Q2112.6719,692.9375 2113.2813,692.9375 L2118.4219,692.9375 Q2119.0313,692.9375 2119.2969,693.1719 Q2119.5625,693.4063 2119.5625,693.7813 Q2119.5625,694.1719 2119.2969,694.4063 Q2119.0313,694.6406 2118.4219,694.6406 L2116.7031,694.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="163" x="2136.25" y="703.7285">IGenericTemplateStorage</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="81" x="2634.5" y="679"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="79" x="2635.5" y="692.457">TemplateType</text><line style="stroke:#181818;stroke-width:0.5;" x1="1774.5" x2="2711.5" y1="714" y2="714"/><ellipse cx="1784.5" cy="725" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="429" x="1793.5" y="732.5332">GetByName(ctx context.Context, string name) (TemplateType, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1774.5" x2="2711.5" y1="739.6094" y2="739.6094"/><ellipse cx="1784.5" cy="750.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="913" x="1793.5" y="758.1426">GetList(ctx context.Context, orderBy string, orderDirection string, page int, size int, queryBuilder interfaces.IQueryBuilder) ([]TemplateType, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1774.5" x2="2711.5" y1="765.2188" y2="765.2188"/><ellipse cx="1784.5" cy="776.2188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="494" x="1793.5" y="783.752">Count(ctx context.Context, queryBuilder interfaces.IQueryBuilder) (int64, error)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1774.5" x2="2711.5" y1="790.8281" y2="790.8281"/><ellipse cx="1784.5" cy="801.8281" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="393" x="1793.5" y="809.3613">NewQueryBuilder(ctx context.Context) interfaces.IQueryBuilder</text></g><!--MD5=[8833f603fefea890694bef68ef08d572]
class YamlGenericTemplateStorage--><g id="elem_YamlGenericTemplateStorage"><rect codeLine="4" fill="#F1F1F1" height="48" id="YamlGenericTemplateStorage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="305" x="1931.5" y="413.5"/><ellipse cx="1946.5" cy="429.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1949.2656,425.375 Q1949.4219,425.1563 1949.6094,425.0469 Q1949.7969,424.9375 1950.0156,424.9375 Q1950.3906,424.9375 1950.625,425.2031 Q1950.8594,425.4531 1950.8594,426.0625 L1950.8594,427.5156 Q1950.8594,428.125 1950.625,428.3906 Q1950.3906,428.6563 1950.0156,428.6563 Q1949.6719,428.6563 1949.4688,428.4531 Q1949.2656,428.2656 1949.1563,427.75 Q1949.1094,427.3906 1948.9219,427.2031 Q1948.5938,426.8281 1947.9844,426.6094 Q1947.375,426.3906 1946.75,426.3906 Q1945.9844,426.3906 1945.3438,426.7188 Q1944.7188,427.0469 1944.2188,427.7969 Q1943.7344,428.5469 1943.7344,429.5781 L1943.7344,430.6719 Q1943.7344,431.9063 1944.625,432.7344 Q1945.5156,433.5469 1947.1094,433.5469 Q1948.0469,433.5469 1948.7031,433.2969 Q1949.0938,433.1406 1949.5156,432.7031 Q1949.7813,432.4375 1949.9219,432.3594 Q1950.0781,432.2813 1950.2813,432.2813 Q1950.6094,432.2813 1950.8594,432.5469 Q1951.125,432.7969 1951.125,433.1406 Q1951.125,433.4844 1950.7813,433.8906 Q1950.2813,434.4688 1949.4844,434.7969 Q1948.4063,435.25 1947.1094,435.25 Q1945.5938,435.25 1944.3906,434.625 Q1943.4063,434.125 1942.7188,433.0625 Q1942.0313,431.9844 1942.0313,430.7031 L1942.0313,429.5469 Q1942.0313,428.2188 1942.6406,427.0781 Q1943.2656,425.9219 1944.3594,425.3125 Q1945.4531,424.6875 1946.6875,424.6875 Q1947.4219,424.6875 1948.0625,424.8594 Q1948.7188,425.0156 1949.2656,425.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="1960.5" y="435.2285">YamlGenericTemplateStorage</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="81" x="2158.5" y="410.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="79" x="2159.5" y="423.957">TemplateType</text><line style="stroke:#181818;stroke-width:0.5;" x1="1932.5" x2="2235.5" y1="445.5" y2="445.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="1932.5" x2="2235.5" y1="453.5" y2="453.5"/></g><g id="elem_DeviceTemplateTypeNote"><path d="M1931.5,158.5 L1931.5,184.8516 L2142.5,184.8516 L2142.5,168.5 L2132.5,158.5 L1931.5,158.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2132.5,158.5 L2132.5,168.5 L2142.5,168.5 L2132.5,158.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="1937.5" y="176.9951">TemplateType is DeviceTemplate</text></g><!--MD5=[0a5b1b1134ca6b30331cdfcf1e845328]
class DeviceTemplateStorage--><g id="elem_DeviceTemplateStorage"><rect codeLine="8" fill="#F1F1F1" height="48" id="DeviceTemplateStorage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="1999" y="42"/><ellipse cx="2014" cy="58" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2016.7656,53.875 Q2016.9219,53.6563 2017.1094,53.5469 Q2017.2969,53.4375 2017.5156,53.4375 Q2017.8906,53.4375 2018.125,53.7031 Q2018.3594,53.9531 2018.3594,54.5625 L2018.3594,56.0156 Q2018.3594,56.625 2018.125,56.8906 Q2017.8906,57.1563 2017.5156,57.1563 Q2017.1719,57.1563 2016.9688,56.9531 Q2016.7656,56.7656 2016.6563,56.25 Q2016.6094,55.8906 2016.4219,55.7031 Q2016.0938,55.3281 2015.4844,55.1094 Q2014.875,54.8906 2014.25,54.8906 Q2013.4844,54.8906 2012.8438,55.2188 Q2012.2188,55.5469 2011.7188,56.2969 Q2011.2344,57.0469 2011.2344,58.0781 L2011.2344,59.1719 Q2011.2344,60.4063 2012.125,61.2344 Q2013.0156,62.0469 2014.6094,62.0469 Q2015.5469,62.0469 2016.2031,61.7969 Q2016.5938,61.6406 2017.0156,61.2031 Q2017.2813,60.9375 2017.4219,60.8594 Q2017.5781,60.7813 2017.7813,60.7813 Q2018.1094,60.7813 2018.3594,61.0469 Q2018.625,61.2969 2018.625,61.6406 Q2018.625,61.9844 2018.2813,62.3906 Q2017.7813,62.9688 2016.9844,63.2969 Q2015.9063,63.75 2014.6094,63.75 Q2013.0938,63.75 2011.8906,63.125 Q2010.9063,62.625 2010.2188,61.5625 Q2009.5313,60.4844 2009.5313,59.2031 L2009.5313,58.0469 Q2009.5313,56.7188 2010.1406,55.5781 Q2010.7656,54.4219 2011.8594,53.8125 Q2012.9531,53.1875 2014.1875,53.1875 Q2014.9219,53.1875 2015.5625,53.3594 Q2016.2188,53.5156 2016.7656,53.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="2028" y="63.7285">DeviceTemplateStorage</text><line style="stroke:#181818;stroke-width:0.5;" x1="2000" x2="2182" y1="74" y2="74"/><line style="stroke:#181818;stroke-width:0.5;" x1="2000" x2="2182" y1="82" y2="82"/></g><!--MD5=[99b2cc807b2a6d9cde1eed7ebe5ca8d6]
class DeviceTemplateNetworkInterface--><g id="elem_DeviceTemplateNetworkInterface"><rect codeLine="3" fill="#F1F1F1" height="134.4375" id="DeviceTemplateNetworkInterface" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="1074.5" y="370.5"/><ellipse cx="1089.5" cy="386.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1092.2656,382.375 Q1092.4219,382.1563 1092.6094,382.0469 Q1092.7969,381.9375 1093.0156,381.9375 Q1093.3906,381.9375 1093.625,382.2031 Q1093.8594,382.4531 1093.8594,383.0625 L1093.8594,384.5156 Q1093.8594,385.125 1093.625,385.3906 Q1093.3906,385.6563 1093.0156,385.6563 Q1092.6719,385.6563 1092.4688,385.4531 Q1092.2656,385.2656 1092.1563,384.75 Q1092.1094,384.3906 1091.9219,384.2031 Q1091.5938,383.8281 1090.9844,383.6094 Q1090.375,383.3906 1089.75,383.3906 Q1088.9844,383.3906 1088.3438,383.7188 Q1087.7188,384.0469 1087.2188,384.7969 Q1086.7344,385.5469 1086.7344,386.5781 L1086.7344,387.6719 Q1086.7344,388.9063 1087.625,389.7344 Q1088.5156,390.5469 1090.1094,390.5469 Q1091.0469,390.5469 1091.7031,390.2969 Q1092.0938,390.1406 1092.5156,389.7031 Q1092.7813,389.4375 1092.9219,389.3594 Q1093.0781,389.2813 1093.2813,389.2813 Q1093.6094,389.2813 1093.8594,389.5469 Q1094.125,389.7969 1094.125,390.1406 Q1094.125,390.4844 1093.7813,390.8906 Q1093.2813,391.4688 1092.4844,391.7969 Q1091.4063,392.25 1090.1094,392.25 Q1088.5938,392.25 1087.3906,391.625 Q1086.4063,391.125 1085.7188,390.0625 Q1085.0313,388.9844 1085.0313,387.7031 L1085.0313,386.5469 Q1085.0313,385.2188 1085.6406,384.0781 Q1086.2656,382.9219 1087.3594,382.3125 Q1088.4531,381.6875 1089.6875,381.6875 Q1090.4219,381.6875 1091.0625,381.8594 Q1091.7188,382.0156 1092.2656,382.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207" x="1103.5" y="392.2285">DeviceTemplateNetworkInterface</text><line style="stroke:#181818;stroke-width:0.5;" x1="1075.5" x2="1312.5" y1="402.5" y2="402.5"/><ellipse cx="1085.5" cy="413.5" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1094.5" y="421.0332">Name string</text><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1312.5" y1="428.1094" y2="428.1094"/><ellipse cx="1085.5" cy="439.1094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1094.5" y="446.6426">NetBoot boolean</text><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1312.5" y1="453.7188" y2="453.7188"/><ellipse cx="1085.5" cy="464.7188" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1094.5" y="472.252">POEIn boolean</text><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1312.5" y1="479.3281" y2="479.3281"/><ellipse cx="1085.5" cy="490.3281" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="1094.5" y="497.8613">Management boolean</text></g><path d="M1349,383 L1349,392.1758 L1169.5,415.3047 L1349,400.1758 L1349,409.3516 A0,0 0 0 0 1349,409.3516 L1717,409.3516 A0,0 0 0 0 1717,409.3516 L1717,393 L1707,383 L1349,383 A0,0 0 0 0 1349,383 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1707,383 L1707,393 L1717,393 L1707,383 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="347" x="1355" y="401.4951">This field is unique within device template network interfaces</text><path d="M1349,419.3516 L1349,428.5273 L1189.5,466.5234 L1349,436.5273 L1349,445.7031 A0,0 0 0 0 1349,445.7031 L1660,445.7031 A0,0 0 0 0 1660,445.7031 L1660,429.3516 L1650,419.3516 L1349,419.3516 A0,0 0 0 0 1349,419.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1650,419.3516 L1650,429.3516 L1660,429.3516 L1650,419.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="1355" y="437.8467">Only one network interface can be mark as POEIn</text><path d="M1349,455.7031 L1349,464.8789 L1231.5,492.1328 L1349,472.8789 L1349,482.0547 A0,0 0 0 0 1349,482.0547 L1697,482.0547 A0,0 0 0 0 1697,482.0547 L1697,465.7031 L1687,455.7031 L1349,455.7031 A0,0 0 0 0 1349,455.7031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1687,455.7031 L1687,465.7031 L1697,465.7031 L1687,455.7031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="327" x="1355" y="474.1982">Only one network interface can be mark as management</text><!--MD5=[a234cf70aac494477a7ddd9e1f220e42]
class DeviceTemplateControlDesc--><g id="elem_DeviceTemplateControlDesc"><rect codeLine="3" fill="#F1F1F1" height="108.8281" id="DeviceTemplateControlDesc" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="212" x="791" y="694.5"/><ellipse cx="806" cy="710.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M808.7656,706.375 Q808.9219,706.1563 809.1094,706.0469 Q809.2969,705.9375 809.5156,705.9375 Q809.8906,705.9375 810.125,706.2031 Q810.3594,706.4531 810.3594,707.0625 L810.3594,708.5156 Q810.3594,709.125 810.125,709.3906 Q809.8906,709.6563 809.5156,709.6563 Q809.1719,709.6563 808.9688,709.4531 Q808.7656,709.2656 808.6563,708.75 Q808.6094,708.3906 808.4219,708.2031 Q808.0938,707.8281 807.4844,707.6094 Q806.875,707.3906 806.25,707.3906 Q805.4844,707.3906 804.8438,707.7188 Q804.2188,708.0469 803.7188,708.7969 Q803.2344,709.5469 803.2344,710.5781 L803.2344,711.6719 Q803.2344,712.9063 804.125,713.7344 Q805.0156,714.5469 806.6094,714.5469 Q807.5469,714.5469 808.2031,714.2969 Q808.5938,714.1406 809.0156,713.7031 Q809.2813,713.4375 809.4219,713.3594 Q809.5781,713.2813 809.7813,713.2813 Q810.1094,713.2813 810.3594,713.5469 Q810.625,713.7969 810.625,714.1406 Q810.625,714.4844 810.2813,714.8906 Q809.7813,715.4688 808.9844,715.7969 Q807.9063,716.25 806.6094,716.25 Q805.0938,716.25 803.8906,715.625 Q802.9063,715.125 802.2188,714.0625 Q801.5313,712.9844 801.5313,711.7031 L801.5313,710.5469 Q801.5313,709.2188 802.1406,708.0781 Q802.7656,706.9219 803.8594,706.3125 Q804.9531,705.6875 806.1875,705.6875 Q806.9219,705.6875 807.5625,705.8594 Q808.2188,706.0156 808.7656,706.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="820" y="716.2285">DeviceTemplateControlDesc</text><line style="stroke:#181818;stroke-width:0.5;" x1="792" x2="1002" y1="726.5" y2="726.5"/><ellipse cx="802" cy="737.5" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="811" y="745.0332">Emergency string</text><line style="stroke:#181818;stroke-width:1.0;" x1="792" x2="1002" y1="752.1094" y2="752.1094"/><ellipse cx="802" cy="763.1094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="811" y="770.6426">Power string</text><line style="stroke:#181818;stroke-width:1.0;" x1="792" x2="1002" y1="777.7188" y2="777.7188"/><ellipse cx="802" cy="788.7188" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="811" y="796.252">NextBoot string</text></g><path d="M1038,686.5 L1038,695.6758 L921,739.3047 L1038,703.6758 L1038,712.8516 A0,0 0 0 0 1038,712.8516 L1674,712.8516 A0,0 0 0 0 1674,712.8516 L1674,696.5 L1664,686.5 L1038,686.5 A0,0 0 0 0 1038,686.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1664,686.5 L1664,696.5 L1674,696.5 L1664,686.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="615" x="1044" y="704.9951">How to control device power in case of emergency. As example: POE(For Rpi4), IPMI, ILO or PowerSwitch</text><path d="M1038,722.8516 L1038,732.0273 L889,764.9141 L1038,740.0273 L1038,749.2031 A0,0 0 0 0 1038,749.2031 L1546,749.2031 A0,0 0 0 0 1546,749.2031 L1546,732.8516 L1536,722.8516 L1038,722.8516 A0,0 0 0 0 1038,722.8516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1536,722.8516 L1536,732.8516 L1546,732.8516 L1536,722.8516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="487" x="1044" y="741.3467">How to control device power. As example: POE(For Rpi4), IPMI, ILO or PowerSwitch</text><path d="M1038,759.2031 L1038,776.5547 L906,790.5234 L1038,784.5547 L1038,801.9063 A0,0 0 0 0 1038,801.9063 L1566,801.9063 A0,0 0 0 0 1566,801.9063 L1566,769.2031 L1556,759.2031 L1038,759.2031 A0,0 0 0 0 1038,759.2031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1556,759.2031 L1556,769.2031 L1566,769.2031 L1556,759.2031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="383" x="1044" y="777.6982">How to change next boot device. As example: IPMI, ILO or NONE.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="507" x="1044" y="794.0498">For example NONE is used for Rpi4, we control next boot by u-boot files in boot stages.</text><!--MD5=[7885a1e79022bd13a786b4cdad8db080]
class BootStageTemplate--><g id="elem_BootStageTemplate"><rect codeLine="3" fill="#F1F1F1" height="134.4375" id="BootStageTemplate" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="216" x="407" y="371"/><ellipse cx="448.55" cy="387" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M451.3156,382.875 Q451.4719,382.6563 451.6594,382.5469 Q451.8469,382.4375 452.0656,382.4375 Q452.4406,382.4375 452.675,382.7031 Q452.9094,382.9531 452.9094,383.5625 L452.9094,385.0156 Q452.9094,385.625 452.675,385.8906 Q452.4406,386.1563 452.0656,386.1563 Q451.7219,386.1563 451.5188,385.9531 Q451.3156,385.7656 451.2063,385.25 Q451.1594,384.8906 450.9719,384.7031 Q450.6438,384.3281 450.0344,384.1094 Q449.425,383.8906 448.8,383.8906 Q448.0344,383.8906 447.3938,384.2188 Q446.7688,384.5469 446.2688,385.2969 Q445.7844,386.0469 445.7844,387.0781 L445.7844,388.1719 Q445.7844,389.4063 446.675,390.2344 Q447.5656,391.0469 449.1594,391.0469 Q450.0969,391.0469 450.7531,390.7969 Q451.1438,390.6406 451.5656,390.2031 Q451.8313,389.9375 451.9719,389.8594 Q452.1281,389.7813 452.3313,389.7813 Q452.6594,389.7813 452.9094,390.0469 Q453.175,390.2969 453.175,390.6406 Q453.175,390.9844 452.8313,391.3906 Q452.3313,391.9688 451.5344,392.2969 Q450.4563,392.75 449.1594,392.75 Q447.6438,392.75 446.4406,392.125 Q445.4563,391.625 444.7688,390.5625 Q444.0813,389.4844 444.0813,388.2031 L444.0813,387.0469 Q444.0813,385.7188 444.6906,384.5781 Q445.3156,383.4219 446.4094,382.8125 Q447.5031,382.1875 448.7375,382.1875 Q449.4719,382.1875 450.1125,382.3594 Q450.7688,382.5156 451.3156,382.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="468.45" y="392.7285">BootStageTemplate</text><line style="stroke:#181818;stroke-width:0.5;" x1="408" x2="622" y1="403" y2="403"/><ellipse cx="418" cy="414" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="427" y="421.5332">Name string</text><line style="stroke:#181818;stroke-width:1.0;" x1="408" x2="622" y1="428.6094" y2="428.6094"/><ellipse cx="418" cy="439.6094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="427" y="447.1426">Description string</text><line style="stroke:#181818;stroke-width:1.0;" x1="408" x2="622" y1="454.2188" y2="454.2188"/><ellipse cx="418" cy="465.2188" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="427" y="472.752">Action string</text><line style="stroke:#181818;stroke-width:1.0;" x1="408" x2="622" y1="479.8281" y2="479.8281"/><ellipse cx="418" cy="490.8281" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="427" y="498.3613">Files []BootStageTemplateFile</text></g><!--MD5=[b52e4b02592e8087d88e253407fc28e5]
class BootStageTemplateFile--><g id="elem_BootStageTemplateFile"><rect codeLine="13" fill="#F1F1F1" height="83.2188" id="BootStageTemplateFile" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="435" y="707.5"/><ellipse cx="450" cy="723.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M452.7656,719.375 Q452.9219,719.1563 453.1094,719.0469 Q453.2969,718.9375 453.5156,718.9375 Q453.8906,718.9375 454.125,719.2031 Q454.3594,719.4531 454.3594,720.0625 L454.3594,721.5156 Q454.3594,722.125 454.125,722.3906 Q453.8906,722.6563 453.5156,722.6563 Q453.1719,722.6563 452.9688,722.4531 Q452.7656,722.2656 452.6563,721.75 Q452.6094,721.3906 452.4219,721.2031 Q452.0938,720.8281 451.4844,720.6094 Q450.875,720.3906 450.25,720.3906 Q449.4844,720.3906 448.8438,720.7188 Q448.2188,721.0469 447.7188,721.7969 Q447.2344,722.5469 447.2344,723.5781 L447.2344,724.6719 Q447.2344,725.9063 448.125,726.7344 Q449.0156,727.5469 450.6094,727.5469 Q451.5469,727.5469 452.2031,727.2969 Q452.5938,727.1406 453.0156,726.7031 Q453.2813,726.4375 453.4219,726.3594 Q453.5781,726.2813 453.7813,726.2813 Q454.1094,726.2813 454.3594,726.5469 Q454.625,726.7969 454.625,727.1406 Q454.625,727.4844 454.2813,727.8906 Q453.7813,728.4688 452.9844,728.7969 Q451.9063,729.25 450.6094,729.25 Q449.0938,729.25 447.8906,728.625 Q446.9063,728.125 446.2188,727.0625 Q445.5313,725.9844 445.5313,724.7031 L445.5313,723.5469 Q445.5313,722.2188 446.1406,721.0781 Q446.7656,719.9219 447.8594,719.3125 Q448.9531,718.6875 450.1875,718.6875 Q450.9219,718.6875 451.5625,718.8594 Q452.2188,719.0156 452.7656,719.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="464" y="729.2285">BootStageTemplateFile</text><line style="stroke:#181818;stroke-width:0.5;" x1="436" x2="614" y1="739.5" y2="739.5"/><ellipse cx="446" cy="750.5" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="455" y="758.0332">ExistingFileName string</text><line style="stroke:#181818;stroke-width:1.0;" x1="436" x2="614" y1="765.1094" y2="765.1094"/><ellipse cx="446" cy="776.1094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="455" y="783.6426">VirtualFileName</text></g><g id="elem_GMN886"><path d="M266,150 L266,192.7031 A0,0 0 0 0 266,192.7031 L511,192.7031 L515,366.96 L519,192.7031 L764,192.7031 A0,0 0 0 0 764,192.7031 L764,160 L754,150 L266,150 A0,0 0 0 0 266,150 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M754,150 L754,160 L764,160 L754,150 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="465" x="272" y="168.4951">Boot stage can be overwritten in runtime by device entity or by device rent entity.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="477" x="272" y="184.8467">BootStageTemplate converts to BootStage for device, then we create device entity.</text></g><path d="M22.5,362 L22.5,502.8125 A0,0 0 0 0 22.5,502.8125 L363.5,502.8125 A0,0 0 0 0 363.5,502.8125 L363.5,436.4063 L411,467.0234 L363.5,428.4063 L363.5,372 L353.5,362 L22.5,362 A0,0 0 0 0 22.5,362 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M353.5,362 L353.5,372 L363.5,372 L353.5,362 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="28.5" y="380.4951">Action for this boot stage.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="28.5" y="396.8467">Can be: File, CheckPowerSwitch, EmergencyPowerOff,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="28.5" y="413.1982">PowerOff, EmergencyPowerOn, PowerOn,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="28.5" y="429.5498">CheckManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="28.5" y="445.9014">For File action:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="44.5" y="462.2529">A stage can only be marked complete if all files have</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="44.5" y="478.6045">been downloaded by the device via TFTP or DHCP,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="44.5" y="494.9561">after which the next step can be loaded.</text><path d="M22,704.5 L22,747.2031 A0,0 0 0 0 22,747.2031 L400,747.2031 A0,0 0 0 0 400,747.2031 L400,729.8516 L439,752.3047 L400,721.8516 L400,714.5 L390,704.5 L22,704.5 A0,0 0 0 0 22,704.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M390,704.5 L390,714.5 L400,714.5 L390,704.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="28" y="722.9951">Existing file name is a real full file path with name on the disk.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="28" y="739.3467">This path is relative from app directory</text><path d="M22,757.2031 L22,783.5547 A0,0 0 0 0 22,783.5547 L326,783.5547 A0,0 0 0 0 326,783.5547 L326,775.2031 L439,777.9141 L326,767.2031 L326,767.2031 L316,757.2031 L22,757.2031 A0,0 0 0 0 22,757.2031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M316,757.2031 L316,767.2031 L326,767.2031 L316,757.2031 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="28" y="775.6982">Virtual file name is relative from /&lt;mac-address&gt;/</text><!--MD5=[01516973ad7471874169af5526e0376a]
class DeviceTemplate--><g id="elem_DeviceTemplate"><rect codeLine="7" fill="#F1F1F1" height="364.9219" id="DeviceTemplate" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="357" x="674.5" y="257"/><ellipse cx="797.75" cy="273" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M800.5156,268.875 Q800.6719,268.6563 800.8594,268.5469 Q801.0469,268.4375 801.2656,268.4375 Q801.6406,268.4375 801.875,268.7031 Q802.1094,268.9531 802.1094,269.5625 L802.1094,271.0156 Q802.1094,271.625 801.875,271.8906 Q801.6406,272.1563 801.2656,272.1563 Q800.9219,272.1563 800.7188,271.9531 Q800.5156,271.7656 800.4063,271.25 Q800.3594,270.8906 800.1719,270.7031 Q799.8438,270.3281 799.2344,270.1094 Q798.625,269.8906 798,269.8906 Q797.2344,269.8906 796.5938,270.2188 Q795.9688,270.5469 795.4688,271.2969 Q794.9844,272.0469 794.9844,273.0781 L794.9844,274.1719 Q794.9844,275.4063 795.875,276.2344 Q796.7656,277.0469 798.3594,277.0469 Q799.2969,277.0469 799.9531,276.7969 Q800.3438,276.6406 800.7656,276.2031 Q801.0313,275.9375 801.1719,275.8594 Q801.3281,275.7813 801.5313,275.7813 Q801.8594,275.7813 802.1094,276.0469 Q802.375,276.2969 802.375,276.6406 Q802.375,276.9844 802.0313,277.3906 Q801.5313,277.9688 800.7344,278.2969 Q799.6563,278.75 798.3594,278.75 Q796.8438,278.75 795.6406,278.125 Q794.6563,277.625 793.9688,276.5625 Q793.2813,275.4844 793.2813,274.2031 L793.2813,273.0469 Q793.2813,271.7188 793.8906,270.5781 Q794.5156,269.4219 795.6094,268.8125 Q796.7031,268.1875 797.9375,268.1875 Q798.6719,268.1875 799.3125,268.3594 Q799.9688,268.5156 800.5156,268.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="818.25" y="278.7285">DeviceTemplate</text><line style="stroke:#181818;stroke-width:0.5;" x1="675.5" x2="1030.5" y1="289" y2="289"/><ellipse cx="685.5" cy="300" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="694.5" y="307.5332">Name string</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="675.5" x2="1030.5" y1="314.6094" y2="314.6094"/><ellipse cx="685.5" cy="325.6094" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="217" x="694.5" y="333.1426">Unique within the device templates</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="340.2188" y2="340.2188"/><ellipse cx="685.5" cy="351.2188" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="694.5" y="358.752">Model</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="365.8281" y2="365.8281"/><ellipse cx="685.5" cy="376.8281" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="694.5" y="384.3613">Manufacturer</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="391.4375" y2="391.4375"/><ellipse cx="685.5" cy="402.4375" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="694.5" y="409.9707">Description string</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="417.0469" y2="417.0469"/><ellipse cx="685.5" cy="428.0469" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="694.5" y="435.5801">CPUCount int</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="442.6563" y2="442.6563"/><ellipse cx="685.5" cy="453.6563" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="694.5" y="461.1895">CPUModel string</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="468.2656" y2="468.2656"/><ellipse cx="685.5" cy="479.2656" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="694.5" y="486.7988">RAM int</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="493.875" y2="493.875"/><ellipse cx="685.5" cy="504.875" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="331" x="694.5" y="512.4082">NetworkInterfaces []DeviceTemplateNetworkInterface</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="519.4844" y2="519.4844"/><ellipse cx="685.5" cy="530.4844" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230" x="694.5" y="538.0176">Control DeviceTemplateControlDesc</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="545.0938" y2="545.0938"/><ellipse cx="685.5" cy="556.0938" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="237" x="694.5" y="563.627">DiskBootStages []BootStageTemplate</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="570.7031" y2="570.7031"/><ellipse cx="685.5" cy="581.7031" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="694.5" y="589.2363">NetBootStages []BootStageTemplate</text><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="1030.5" y1="596.3125" y2="596.3125"/><ellipse cx="685.5" cy="607.3125" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="237" x="694.5" y="614.8457">USBBootStages []BootStageTemplate</text></g><!--MD5=[6716299319294c9c14361b18eac2eaf1]
link YamlGenericTemplateStorage to IGenericTemplateStorage--><g id="link_YamlGenericTemplateStorage_IGenericTemplateStorage"><path codeLine="6" d="M2095.82,461.51 C2117.48,503.67 2164.52,595.23 2199.62,663.56 " fill="none" id="YamlGenericTemplateStorage-to-IGenericTemplateStorage" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2206.03,660.72,2208.95,681.71,2193.58,667.12,2206.03,660.72" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[0381bb59898f3a371ff9d90742c0dc4e]
link BootStageTemplate to BootStageTemplateFile--><g id="link_BootStageTemplate_BootStageTemplateFile"><path codeLine="19" d="M624,492.5 C669.49,492.5 591.76,635.1 549.53,707.23 " fill="none" id="BootStageTemplate-BootStageTemplateFile" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[3dadd3e37452f179ec37cda4fb2c29a9]
link DeviceTemplateNetworkInterface to DeviceTemplateControlDesc--><!--MD5=[7d779a142703a7bcbbdfb7862acf7763]
link DeviceTemplate to DeviceTemplateNetworkInterface--><g id="link_DeviceTemplate_DeviceTemplateNetworkInterface"><path codeLine="37" d="M1033,506.5 C1049.91,510.21 1067.06,509.82 1083.55,506.77 " fill="none" id="DeviceTemplate-DeviceTemplateNetworkInterface" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1083.55" x2="1093.72" y1="506.77" y2="504.54"/></g><!--MD5=[e7661e4dd0fdfb1f621df1d32ae37a5f]
link DeviceTemplate to DeviceTemplateControlDesc--><g id="link_DeviceTemplate_DeviceTemplateControlDesc"><path codeLine="38" d="M1033,531.5 C1073.22,531.5 1048.24,585.2 1032,622 C1027.75,631.64 992.24,664.63 958.71,694.43 " fill="none" id="DeviceTemplate-DeviceTemplateControlDesc" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b97fc04679236aa6f50d8657f9bb91f6]
link BootStageTemplate to DeviceTemplate--><g id="link_BootStageTemplate_DeviceTemplate"><path codeLine="39" d="M573.23,508.1 C598.04,531.42 629.3,552.38 663.72,555.96 " fill="none" id="BootStageTemplate-DeviceTemplate" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="663.72" x2="674" y1="555.96" y2="556.5"/></g><!--MD5=[05fda321c72bdf89bce8b9e55bb397a1]
link DeviceTemplate to BootStageTemplate--><g id="link_DeviceTemplate_BootStageTemplate"><path codeLine="40" d="M674,581.5 C629.5,581.5 592.03,549.92 564.76,516.33 " fill="none" id="DeviceTemplate-BootStageTemplate" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="564.76" x2="558.4" y1="516.33" y2="508.23"/></g><!--MD5=[05fda321c72bdf89bce8b9e55bb397a1]
link DeviceTemplate to BootStageTemplate--><g id="link_DeviceTemplate_BootStageTemplate"><path codeLine="41" d="M674,606.5 C620.53,606.5 579.94,560.8 553.3,516.93 " fill="none" id="DeviceTemplate-BootStageTemplate-1" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="553.3" x2="548.16" y1="516.93" y2="508.19"/></g><!--MD5=[aafc8442390dd208902875b502bdb1b9]
link DeviceTemplateStorage to YamlGenericTemplateStorage--><g id="link_DeviceTemplateStorage_YamlGenericTemplateStorage"><path codeLine="10" d="M2145.75,90.05 C2151.41,94.54 2156.39,99.82 2160,106 C2179.49,139.4 2165.83,154.77 2160,193 C2148.38,269.23 2117.41,354.42 2098.78,401.11 " fill="none" id="DeviceTemplateStorage-to-YamlGenericTemplateStorage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2093.88,413.21,2099.8364,409.1453,2098.3753,402.0838,2092.4189,406.1485,2093.88,413.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[28b2906350ba8ad8a75fd4919b8e926a]
link DeviceTemplateStorage to DeviceTemplateTypeNote--><g id="link_DeviceTemplateStorage_DeviceTemplateTypeNote"><path codeLine="11" d="M2078.88,90.23 C2067.87,111.33 2052.07,141.62 2043.36,158.31 " fill="none" id="DeviceTemplateStorage-DeviceTemplateTypeNote" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[410bb39baeaa5f964ff5c26539504374]
link DeviceTemplateTypeNote to YamlGenericTemplateStorage--><g id="link_DeviceTemplateTypeNote_YamlGenericTemplateStorage"><path codeLine="12" d="M2039.14,184.53 C2046.2,224.19 2068.87,351.5 2079.01,408.48 " fill="none" id="DeviceTemplateTypeNote-to-YamlGenericTemplateStorage" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="2079.89,413.44,2082.2619,403.881,2079.0194,408.5164,2074.3841,405.2739,2079.89,413.44" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1f15978b83ef8b61c74759a4371fd214]
link DeviceTemplateTypeNote to DeviceTemplate--><g id="link_DeviceTemplateTypeNote_DeviceTemplate"><path codeLine="13" d="M1931.4,180.29 C1682.2,198.77 1076.9,244.42 1057,253 C1051.2,255.5 1045.46,258.23 1039.78,261.17 " fill="none" id="DeviceTemplateTypeNote-DeviceTemplate" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[b5a98199bb21229cea7cbff41cc2d1ac]
@startuml

!include YamlGenericTemplateStorage.puml
!include ../entities/DeviceTemplate.puml

package infrastructure {
    note "TemplateType is DeviceTemplate" as DeviceTemplateTypeNote

    class DeviceTemplateStorage

    DeviceTemplateStorage - -* YamlGenericTemplateStorage
    DeviceTemplateStorage .down. DeviceTemplateTypeNote
    YamlGenericTemplateStorage <.up. DeviceTemplateTypeNote
    DeviceTemplateTypeNote .. DeviceTemplate
}

@enduml

@startuml


package app {
    interface IGenericTemplateStorage<TemplateType> {
        +GetByName(ctx context.Context, string name) (TemplateType, error)
        - -
        +GetList(ctx context.Context, orderBy string, orderDirection string, page int, size int, queryBuilder interfaces.IQueryBuilder) ([]TemplateType, error)
        - -
        +Count(ctx context.Context, queryBuilder interfaces.IQueryBuilder) (int64, error)
        - -
        +NewQueryBuilder(ctx context.Context) interfaces.IQueryBuilder
    }
}


package infrastructure {
    class YamlGenericTemplateStorage<TemplateType>

    YamlGenericTemplateStorage .down.|> IGenericTemplateStorage
}


package domain {
    class DeviceTemplateNetworkInterface {
        +Name string
        - -
        +NetBoot boolean
        - -
        +POEIn boolean
        - -
        +Management boolean
    }
    note right of DeviceTemplateNetworkInterface::Name
      This field is unique within device template network interfaces
    end note

    note right of DeviceTemplateNetworkInterface::POEIn
      Only one network interface can be mark as POEIn
    end note

    note right of DeviceTemplateNetworkInterface::Management
      Only one network interface can be mark as management
    end note
}


package domain {
    class DeviceTemplateControlDesc {
        +Emergency string
        - -
        +Power string
        - -
        +NextBoot string
    }

    note right of DeviceTemplateControlDesc::Emergency
    How to control device power in case of emergency. As example: POE(For Rpi4), IPMI, ILO or PowerSwitch
    end note

    note right of DeviceTemplateControlDesc::Power
    How to control device power. As example: POE(For Rpi4), IPMI, ILO or PowerSwitch
    end note

    note right of DeviceTemplateControlDesc::NextBoot
    How to change next boot device. As example: IPMI, ILO or NONE.
    For example NONE is used for Rpi4, we control next boot by u-boot files in boot stages.
    end note
}


package domain {
    class BootStageTemplate {
        +Name string
        - -
        +Description string
        - -
        +Action string
        - -
        +Files []BootStageTemplateFile
    }

    class BootStageTemplateFile {
        +ExistingFileName string
        - -
        +VirtualFileName
    }

    BootStageTemplate::Files - - BootStageTemplateFile

    note top of BootStageTemplate
    Boot stage can be overwritten in runtime by device entity or by device rent entity.
    BootStageTemplate converts to BootStage for device, then we create device entity.
    end note

    note left of BootStageTemplate::Action
    Action for this boot stage.
    Can be: File, CheckPowerSwitch, EmergencyPowerOff,
    PowerOff, EmergencyPowerOn, PowerOn,
    CheckManagement
    For File action:
        A stage can only be marked complete if all files have
        been downloaded by the device via TFTP or DHCP,
        after which the next step can be loaded.
    end note

    note left of BootStageTemplateFile::ExistingFileName
    Existing file name is a real full file path with name on the disk.
    This path is relative from app directory
    end note

    note left of BootStageTemplateFile::VirtualFileName
    Virtual file name is relative from /<mac-address>/
    end note
}


package domain {
    class DeviceTemplate {
        +Name string
        ..
        +Unique within the device templates
        - -
        +Model
        - -
        +Manufacturer
        - -
        +Description string
        - -
        +CPUCount int
        - -
        +CPUModel string
        - -
        +RAM int
        - -
        +NetworkInterfaces []DeviceTemplateNetworkInterface
        - -
        +Control DeviceTemplateControlDesc
        - -
        +DiskBootStages []BootStageTemplate
        - -
        +NetBootStages []BootStageTemplate
        - -
        +USBBootStages []BootStageTemplate
    }


    DeviceTemplateNetworkInterface -[hidden]down-DeviceTemplateControlDesc
    DeviceTemplate::NetworkInterfaces -right- DeviceTemplateNetworkInterface
    DeviceTemplate::Control -right- DeviceTemplateControlDesc
    DeviceTemplate::DiskBootStages -left- BootStageTemplate
    DeviceTemplate::NetBootStages - - BootStageTemplate
    DeviceTemplate::USBBootStages - - BootStageTemplate
}


package infrastructure {
    note "TemplateType is DeviceTemplate" as DeviceTemplateTypeNote

    class DeviceTemplateStorage

    DeviceTemplateStorage - -* YamlGenericTemplateStorage
    DeviceTemplateStorage .down. DeviceTemplateTypeNote
    YamlGenericTemplateStorage <.up. DeviceTemplateTypeNote
    DeviceTemplateTypeNote .. DeviceTemplate
}

@enduml

PlantUML version 1.2022.6(Tue Jun 21 20:34:49 MSK 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1251
Language: ru
Country: RU
--></g></svg>